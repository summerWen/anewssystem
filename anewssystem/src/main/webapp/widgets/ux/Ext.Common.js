//Ext.data.Store=function(A){this.data=new Ext.util.MixedCollection(false);this.data.getKey=function(A){return A.id};this.baseParams={};this.paramNames={"start":"start","limit":"limit","sort":"sort","dir":"dir"};Ext.apply(this,A);if(this.reader&&!this.recordType)this.recordType=this.reader.recordType;this.fields=this.recordType.prototype.fields;this.modified=[];this.addEvents({datachanged:true,add:true,remove:true,update:true,clear:true,beforeload:true,load:true,loadexception:true});if(this.proxy)this.relayEvents(this.proxy,["loadexception"]);this.sortToggle={};Ext.data.Store.superclass.constructor.call(this)};Ext.extend(Ext.data.Store,Ext.util.Observable,{remoteSort:false,lastOptions:null,add:function(D){D=[].concat(D);for(var C=0,B=D.length;C<B;C++)D[C].join(this);var A=this.data.length;this.data.addAll(D);this.fireEvent("add",this,D,A)},remove:function(B){var A=this.data.indexOf(B);this.data.removeAt(A);this.fireEvent("remove",this,B,A)},removeAll:function(){this.data.clear();this.fireEvent("clear",this)},insert:function(B,D){D=[].concat(D);for(var C=0,A=D.length;C<A;C++){this.data.insert(B,D[C]);D[C].join(this)}this.fireEvent("add",this,D,B)},indexOf:function(A){return this.data.indexOf(A)},indexOfId:function(A){return this.data.indexOfKey(A)},getById:function(A){return this.data.key(A)},getAt:function(A){return this.data.itemAt(A)},getRange:function(A,B){return this.data.getRange(A,B)},storeOptions:function(A){A=Ext.apply({},A);delete A.callback;delete A.scope;this.lastOptions=A},load:function(C){if(this._options){if(C)this._options.params.start=C.params.start;C=this._options}C=C||{};if(this.fireEvent("beforeload",this,C)!==false){this.storeOptions(C);var B=Ext.apply(C.params||{},this.baseParams);if(this.sortInfo&&this.remoteSort){var A=this.paramNames;B[A["sort"]]=this.sortInfo.field;B[A["dir"]]=this.sortInfo.direction}this.proxy.load(B,this.reader,this.loadRecords,this,C)}},reload:function(A){this.load(Ext.applyIf(A||{},this.lastOptions))},loadRecords:function(B,G,F){if(!B||F===false){if(F!==false)this.fireEvent("load",this,[],G);if(G.callback)G.callback.call(G.scope||this,[],G,false);return}var D=B.records,E=B.totalRecords||D.length;for(var C=0,A=D.length;C<A;C++)D[C].join(this);if(!G||G.add!==true){this.data.clear();this.data.addAll(D);this.totalLength=E;this.applySort();this.fireEvent("datachanged",this)}else{this.totalLength=Math.max(E,this.data.length+D.length);this.data.addAll(D)}this.fireEvent("load",this,D,G);if(G.callback)G.callback.call(G.scope||this,D,G,true)},loadData:function(B,A){var C=this.reader.readRecords(B);this.loadRecords(C,{add:A},true)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if(this.sortInfo&&!this.remoteSort){var C=this.sortInfo,A=C.field,B=this.fields.get(A).sortType,D=function(F,D){var C=B(F.data[A]),E=B(D.data[A]);return C>E?1:(C<E?-1:0)};this.data.sort(C.direction,D);if(this.snapshot&&this.snapshot!=this.data)this.snapshot.sort(C.direction,D)}},setDefaultSort:function(A,B){this.sortInfo={field:A,direction:B?B.toUpperCase():"ASC"}},sort:function(B,C){var A=this.fields.get(B);if(!C)if(this.sortInfo&&this.sortInfo.field==A.name)C=(this.sortToggle[A.name]||"ASC").toggle("ASC","DESC");else C=A.sortDir;this.sortToggle[A.name]=C;this.sortInfo={field:A.name,direction:C};if(!this.remoteSort){this.applySort();this.fireEvent("datachanged",this)}else this.load(this.lastOptions)},each:function(B,A){this.data.each(B,A)},getModifiedRecords:function(){return this.modified},filter:function(B,A){if(!A.exec){A=String(A);if(A.length==0)return this.clearFilter();A=new RegExp("^"+Ext.escapeRe(A),"i")}this.filterBy(function(C){return A.test(C.data[B])})},filterBy:function(C,B){var A=this.snapshot||this.data;this.snapshot=A;this.data=A.filterBy(C,B);this.fireEvent("datachanged",this)},clearFilter:function(A){if(this.snapshot&&this.snapshot!=this.data){this.data=this.snapshot;delete this.snapshot;if(A!==true)this.fireEvent("datachanged",this)}},afterEdit:function(A){if(this.modified.indexOf(A)==-1)this.modified.push(A);this.fireEvent("update",this,A,Ext.data.Record.EDIT)},afterReject:function(A){this.modified.remove(A);this.fireEvent("update",this,A,Ext.data.Record.REJECT)},afterCommit:function(A){this.modified.remove(A);this.fireEvent("update",this,A,Ext.data.Record.COMMIT)},commitChanges:function(){var C=this.modified.slice(0);this.modified=[];for(var B=0,A=C.length;B<A;B++)C[B].commit()},rejectChanges:function(){var C=this.modified.slice(0);this.modified=[];for(var B=0,A=C.length;B<A;B++)C[B].reject()}})

//Ext.View=function(B,C,A){this.el=Ext.get(B,true);if(typeof C=="string")C=new Ext.Template(C);C.compile();this.tpl=C;Ext.apply(this,A);this.addEvents({"beforeclick":true,"click":true,"dblclick":true,"contextmenu":true,"selectionchange":true,"beforeselect":true});this.el.on({"click":this.onClick,"dblclick":this.onDblClick,"contextmenu":this.onContextMenu,scope:this});this.selections=[];this.nodes=[];this.cmp=new Ext.CompositeElementLite([]);if(this.store)this.setStore(this.store,true);Ext.View.superclass.constructor.call(this)};Ext.extend(Ext.View,Ext.util.Observable,{selectedClass:"x-view-selected",emptyText:"",getEl:function(){return this.el},refresh:function(){var F=this.tpl;this.clearSelections();this.el.update("");var C=[],D=this.store.getRange();if(D.length<1){this.el.update(this.emptyText);return}for(var B=0,A=D.length;B<A;B++){var E=this.prepareData(D[B].data,B,D[B]);C[C.length]=F.apply(E)}this.el.update(C.join(""));this.nodes=this.el.dom.childNodes;this.updateIndexes(0)},prepareData:function(A){return A},onUpdate:function(C,B){this.clearSelections();var A=this.store.indexOf(B),D=this.nodes[A];this.tpl.insertBefore(D,this.prepareData(B.data));D.parentNode.removeChild(D);this.updateIndexes(A,A)},onAdd:function(E,F,C){this.clearSelections();if(this.nodes.length==0){this.refresh();return}var G=this.nodes[C];for(var D=0,B=F.length;D<B;D++){var A=this.prepareData(F[D].data);if(G)this.tpl.insertBefore(G,A);else this.tpl.append(this.el,A)}this.updateIndexes(C)},onRemove:function(C,B,A){this.clearSelections();this.el.dom.removeChild(this.nodes[A]);this.updateIndexes(A)},refreshNode:function(A){this.onUpdate(this.store,this.store.getAt(A))},updateIndexes:function(D,C){var B=this.nodes;D=D||0;C=C||B.length-1;for(var A=D;A<=C;A++)B[A].nodeIndex=A},setStore:function(A,B){if(!B&&this.store){this.store.un("datachanged",this.refresh);this.store.un("add",this.onAdd);this.store.un("remove",this.onRemove);this.store.un("update",this.onUpdate);this.store.un("clear",this.refresh)}if(A){A.on("datachanged",this.refresh,this);A.on("add",this.onAdd,this);A.on("remove",this.onRemove,this);A.on("update",this.onUpdate,this);A.on("clear",this.refresh,this)}this.store=A;this.refresh()},findItemFromChild:function(B){var A=this.el.dom;if(!B||B.parentNode==A)return B;var C=B.parentNode;while(C&&C!=A){if(C.parentNode==A)return C;C=C.parentNode}return null},onClick:function(C){var B=this.findItemFromChild(C.getTarget());if(B){var A=this.indexOf(B);if(this.onItemClick(B,A,C)!==false)this.fireEvent("click",this,A,B,C)}else this.clearSelections()},onContextMenu:function(B){var A=this.findItemFromChild(B.getTarget());if(A)this.fireEvent("contextmenu",this,this.indexOf(A),A,B)},onDblClick:function(B){var A=this.findItemFromChild(B.getTarget());if(A)this.fireEvent("dblclick",this,this.indexOf(A),A,B)},onItemClick:function(B,A,C){if(this.fireEvent("beforeclick",this,A,B,C)===false)return false;if(this.multiSelect||this.singleSelect){if(this.multiSelect&&C.shiftKey&&this.lastSelection)this.select(this.getNodes(this.indexOf(this.lastSelection),A),false);else{this.select(B,this.multiSelect&&C.ctrlKey);this.lastSelection=B}C.preventDefault()}return true},getSelectionCount:function(){return this.selections.length},getSelectedNodes:function(){return this.selections},getSelectedIndexes:function(){var C=[],D=this.selections;for(var B=0,A=D.length;B<A;B++)C.push(D[B].nodeIndex);return C},clearSelections:function(A){if(this.nodes&&(this.multiSelect||this.singleSelect)&&this.selections.length>0){this.cmp.elements=this.selections;this.cmp.removeClass(this.selectedClass);this.selections=[];if(!A)this.fireEvent("selectionchange",this,this.selections)}},isSelected:function(A){var B=this.selections;if(B.length<1)return false;A=this.getNode(A);return B.indexOf(A)!==-1},select:function(F,D,E){if(F instanceof Array){if(!D)this.clearSelections(true);for(var B=0,A=F.length;B<A;B++)this.select(F[B],true,true)}else{var C=this.getNode(F);if(C&&!this.isSelected(C)){if(!D)this.clearSelections(true);if(this.fireEvent("beforeselect",this,C,this.selections)!==false){Ext.fly(C).addClass(this.selectedClass);this.selections.push(C);if(!E)this.fireEvent("selectionchange",this,this.selections)}}}},getNode:function(A){if(typeof A=="string")return document.getElementById(A);else if(typeof A=="number")return this.nodes[A];return A},getNodes:function(B,C){var D=this.nodes;B=B||0;C=typeof C=="undefined"?D.length-1:C;var E=[];if(B<=C){for(var A=B;A<=C;A++)E.push(D[A])}else for(A=B;A>=C;A--)E.push(D[A]);return E},indexOf:function(C){C=this.getNode(C);if(typeof C.nodeIndex=="number")return C.nodeIndex;var D=this.nodes;for(var B=0,A=D.length;B<A;B++)if(D[B]==C)return B;return-1}})

//Ext.DatePicker=function(C){Ext.DatePicker.superclass.constructor.call(this,C);this.value=C&&C.value?C.value.clearTime():new Date().clearTime();this.addEvents({select:true});if(this.handler)this.on("select",this.handler,this.scope||this);if(!this.disabledDatesRE&&this.disabledDates){var A=this.disabledDates,D="(?:";for(var B=0;B<A.length;B++){D+=A[B];if(B!=A.length-1)D+="|"}this.disabledDatesRE=new RegExp(D+")")}};Ext.extend(Ext.DatePicker,Ext.Component,{todayText:"\u4eca\u5929",todayTip:"{0} (\u7a7a\u683c)",minDate:null,maxDate:null,minText:"\u5fc5\u987b\u5728\u6700\u5c0f\u65e5\u671f\u7684\u540e\u9762",maxText:"\u5fc5\u987b\u5728\u6700\u5927\u65e5\u671f\u7684\u524d\u9762",format:"Y\u5e74m\u6708d\u65e5",disabledDays:null,disabledDaysText:"",disabledDatesRE:null,disabledDatesText:"",constrainToViewport:true,monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"\u4e0b\u4e00\u5e74 (Ctrl + \u2192)",prevText:"\u4e0a\u4e00\u5e74 (Ctrl + \u2190 )",monthYearText:"\u9009\u62e9\u6708\u4efd (Ctrl + \u2191/\u2193 \u52a0\u51cf\u6708\u4efd)",startDay:0,setValue:function(A){var B=this.value;this.value=A.clearTime(true);if(this.el)this.update(this.value)},getValue:function(){return this.value},focus:function(){if(this.el)this.update(this.activeDate)},onRender:function(H,C){var F=["<table cellspacing=\"0\">","<tr><td class=\"x-date-left\"><a href=\"#\" title=\"",this.prevText,"\">&#160;</a></td><td class=\"x-date-middle\" align=\"center\"></td><td class=\"x-date-right\"><a href=\"#\" title=\"",this.nextText,"\">&#160;</a></td></tr>","<tr id=\"date_days\"><td colspan=\"3\"><table class=\"x-date-inner\" cellspacing=\"0\"><thead><tr>"],G=this.dayNames;for(var E=0;E<7;E++){var A=this.startDay+E;if(A>6)A=A-7;F.push("<th><span>",G[A].substr(0,1),"</span></th>")}F[F.length]="</tr></thead><tbody><tr>";for(E=0;E<42;E++){if(E%7==0&&E!=0)F[F.length]="</tr><tr>";F[F.length]="<td><a href=\"#\" hidefocus=\"on\" class=\"x-date-date\" tabIndex=\"1\"><em><span></span></em></a></td>"}F[F.length]="</tr></tbody></table></td></tr><tr id=\"date_bottom\"><td colspan=\"3\" class=\"x-date-bottom\" align=\"center\"></td></tr></table>";var I=document.createElement("div");I.className="x-date-picker";I.innerHTML=F.join("");H.dom.insertBefore(I,C);this.el=Ext.get(I);if(this.format=="Y\u5e74m\u6708")this.el.setStyle("height","22px");else this.el.setStyle("height","191px");new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevYear,scope:this});new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextYear,scope:this});this.el.on("mousewheel",this.handleMouseWheel,this);var D=new Ext.KeyNav(this.el,{"up":function(A){A.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},"down":function(A){A.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},"left":function(A){A.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},"right":function(A){A.ctrlKey?this.showPrevYear():this.update(this.activeDate.add("d",7))},"pageUp":function(A){this.showNextMonth()},"pageDown":function(A){this.showPrevMonth()},"enter":function(A){A.stopPropagation();return true},scope:this});this.el.on("click",this.handleDateClick,this,{delegate:"a.x-date-date"});this.el.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);this.el.unselectable();this.cells=this.el.select("table.x-date-inner tbody td");this.textNodes=this.el.query("table.x-date-inner tbody span");var K=new Ext.menu.Menu({plain:true,allowOtherMenus:true}),L=Ext.id()+"months",M=(this.input.setAllMonth=="true")?13:12;for(E=0;E<M;E++)K.add(new Ext.menu.CheckItem({id:"mm-"+E,text:this.monthNames[E],group:L,month:E}));K.on({"beforeshow":function(){var A=Ext.form.DateField.superclass.getValue.call(this.input);if(A.length==5)K.items.get("mm-"+12).setChecked(true);else K.items.get("mm-"+(this.activeDate||this.value).getMonth()).setChecked(true)},"itemclick":function(B){var A=(this.activeDate||this.value).clone(),C="m";if(B.month==12)C="a";else A.setMonth(B.month);this.update(A,C)},"show":function(A){this.visibleRegion=A.el.getRegion().adjust(2,2,-2,-2)},"mouseout":function(A,B){if(!this.visibleRegion.contains(B.getPoint()))A.hide()},scope:this});this.mbtn=new Ext.Button(this.el.child("td.x-date-middle",true),{menu:K,text:"&#160;",menuAlign:"c-c?",tooltip:this.monthYearText});var B=(nowDate).dateFormat(this.format),J=new Ext.Button(this.el.child("td.x-date-bottom",true),{text:String.format(this.todayText,B),tooltip:String.format(this.todayTip,B),handler:this.selectToday,scope:this});if(Ext.isIE)this.el.repaint();this.update(this.value);if(this.format=="Y\u5e74m\u6708"){Ext.get("date_days").dom.style.display="none";Ext.get("date_bottom").dom.style.display="none"}},showPrevMonth:function(A){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(A){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(B){var A=B.getWheelDelta();if(A>0){this.showPrevMonth();B.stopEvent()}else if(A<0){this.showNextMonth();B.stopEvent()}},handleDateClick:function(B,A){B.stopEvent();if(A.dateValue&&!Ext.fly(A.parentNode).hasClass("x-date-disabled")){this.setValue(new Date(A.dateValue));this.fireEvent("select",this,this.value)}},selectToday:function(){this.setValue(new Date().clearTime());this.fireEvent("select",this,this.value)},update:function(F,U){var X=this.activeDate;this.activeDate=F;if(X&&this.el){var M=F.getTime();if(X.getMonth()==F.getMonth()&&X.getFullYear()==F.getFullYear()&&U!="m"&&U!="a"){this.cells.removeClass("x-date-selected");this.cells.each(function(A){if(A.dom.firstChild.dateValue==M){A.addClass("x-date-selected");setTimeout(function(){try{A.dom.firstChild.focus()}catch(B){}},50);return false}});return}}var A=F.getDaysInMonth(),H=F.getFirstDateOfMonth(),Y=H.getDay()-this.startDay;if(Y<=this.startDay)Y+=7;var a=F.add("mo",-1),E=a.getDaysInMonth()-Y,P=this.cells.elements,C=this.textNodes;A+=Y;var S=86400000,Q=(new Date(a.getFullYear(),a.getMonth(),E)).clearTime(),R=new Date().clearTime().getTime(),N=F.clearTime().getTime(),L=this.minDate?this.minDate.clearTime():Number.NEGATIVE_INFINITY,G=this.maxDate?this.maxDate.clearTime():Number.POSITIVE_INFINITY,B=this.disabledDatesRE,V=this.disabledDatesText,D=this.disabledDays?this.disabledDays.join(""):false,I=this.disabledDaysText,b=this.format,Z=function(A,E){E.title="";var F=Q.getTime();E.firstChild.dateValue=F;if(F==R){E.className+=" x-date-today";E.title=A.todayText}if(F==N){E.className+=" x-date-selected";setTimeout(function(){try{E.firstChild.focus()}catch(A){}},50)}if(F<L){E.className=" x-date-disabled";E.title=A.minText;return}if(F>G){E.className=" x-date-disabled";E.title=A.maxText;return}if(D)if(D.indexOf(Q.getDay())!=-1){E.title=I;E.className=" x-date-disabled"}if(B&&b){var C=Q.dateFormat(b);if(B.test(C)){E.title=V.replace("%0",C);E.className=" x-date-disabled"}}},J=0;for(;J<Y;J++){C[J].innerHTML=(++E);Q.setDate(Q.getDate()+1);P[J].className="x-date-prevday";Z(this,P[J])}for(;J<A;J++){intDay=J-Y+1;C[J].innerHTML=(intDay);Q.setDate(Q.getDate()+1);P[J].className="x-date-active";Z(this,P[J])}var W=0;for(;J<42;J++){C[J].innerHTML=(++W);Q.setDate(Q.getDate()+1);P[J].className="x-date-nextday";Z(this,P[J])}var O=false;if(this.input.onlyYearValue()&&(U!="m")&&(U!="a"))O=true;if(U=="a")O=true;if(O)this.mbtn.setText(F.getFullYear()+"\u5e74");else this.mbtn.setText(F.getFullYear()+"\u5e74"+this.monthNames[F.getMonth()]);if(this.format=="Y\u5e74m\u6708"&&(this.getValue()!=F||O)){if(O)this.input.format="Y\u5e74";this.input.setValue(F);this.input.fireEvent("select",F,this.input);if(O)this.input.format=this.format}if(!this.internalRender){var K=this.el.dom.firstChild,T=K.offsetWidth;this.el.setWidth(T+this.el.getBorderWidth("lr"));Ext.fly(K).setWidth(T);this.internalRender=true;if(Ext.isOpera&&!this.secondPass){K.rows[0].cells[1].style.width=(T-(K.rows[0].cells[0].offsetWidth+K.rows[0].cells[2].offsetWidth))+"px";this.secondPass=true;this.update.defer(10,this,[F])}}}})

//Ext.Button=function(B,A){Ext.apply(this,A);this.addEvents({"click":true,"toggle":true,"mouseover":true,"mouseout":true});if(this.menu)this.menu=Ext.menu.MenuMgr.get(this.menu);if(B)this.render(B);Ext.Button.superclass.constructor.call(this)};Ext.extend(Ext.Button,Ext.util.Observable,{hidden:false,disabled:false,pressed:false,enableToggle:false,menu:undefined,menuAlign:"tl-bl?",menuClassTarget:"tr",clickEvent:"click",handleMouseEvents:true,tooltipType:"qtip",render:function(C){var B;if(this.hideParent)this.parentEl=Ext.get(C);if(!this.dhconfig){if(!this.template){if(!Ext.Button.buttonTemplate)Ext.Button.buttonTemplate=new Ext.Template("<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"x-btn-wrap\"><tbody><tr>","<td class=\"x-btn-left\"><i>&#160;</i></td><td class=\"x-btn-center\"><em><button class=\"x-btn-text\">{0}</button></em></td><td class=\"x-btn-right\"><i>&#160;</i></td>","</tr></tbody></table>");this.template=Ext.Button.buttonTemplate}B=this.template.append(C,[this.text||"&#160;"],true);var A=B.child("button:first");A.on("focus",this.onFocus,this);A.on("blur",this.onBlur,this);if(this.cls)B.addClass(this.cls);if(this.icon)A.setStyle("background-image","url("+this.icon+")");if(this.tooltip)if(typeof this.tooltip=="object")Ext.QuickTips.tips(Ext.apply({target:A.id},this.tooltip));else A.dom[this.tooltipType]=this.tooltip}else B=Ext.DomHelper.append(Ext.get(C).dom,this.dhconfig,true);this.el=B;if(this.id)this.el.dom.id=this.el.id=this.id;if(this.menu){this.el.child(this.menuClassTarget).addClass("x-btn-with-menu");this.menu.on("show",this.onMenuShow,this);this.menu.on("hide",this.onMenuHide,this)}B.addClass("x-btn");if(Ext.isIE&&!Ext.isIE7)this.autoWidth.defer(1,this);else this.autoWidth();if(this.handleMouseEvents){B.on("mouseover",this.onMouseOver,this);B.on("mouseout",this.onMouseOut,this);B.on("mousedown",this.onMouseDown,this)}B.on(this.clickEvent,this.onClick,this);if(this.hidden)this.hide();if(this.disabled)this.disable();Ext.ButtonToggleMgr.register(this);if(this.pressed)this.el.addClass("x-btn-pressed");if(this.repeat){var D=new Ext.util.ClickRepeater(B,typeof this.repeat=="object"?this.repeat:{});D.on("click",this.onClick,this)}},getEl:function(){return this.el},destroy:function(){Ext.ButtonToggleMgr.unregister(this);this.el.removeAllListeners();this.purgeListeners();this.el.remove()},autoWidth:function(){if(this.el){this.el.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var A=this.el.child("button");if(A&&A.getWidth()>20){A.clip();A.setWidth(Ext.util.TextMetrics.measure(A,this.text).width+A.getFrameWidth("lr"))}}if(this.minWidth){if(this.hidden)this.el.beginMeasure();if(this.el.getWidth()<this.minWidth)this.el.setWidth(this.minWidth);if(this.hidden)this.el.endMeasure()}}},setHandler:function(A,B){this.handler=A;this.scope=B},setText:function(A){this.text=A;if(this.el)this.el.child("td.x-btn-center button.x-btn-text").update(A);this.autoWidth()},getText:function(){return this.text},show:function(){this.hidden=false;if(this.el)this[this.hideParent?"parentEl":"el"].setStyle("display","")},hide:function(){this.hidden=true;if(this.el)this[this.hideParent?"parentEl":"el"].setStyle("display","none")},setVisible:function(A){if(A)this.show();else this.hide()},toggle:function(A){A=A===undefined?!this.pressed:A;if(A!=this.pressed){if(A){this.el.addClass("x-btn-pressed");this.pressed=true;this.fireEvent("toggle",this,true)}else{this.el.removeClass("x-btn-pressed");this.pressed=false;this.fireEvent("toggle",this,false)}if(this.toggleHandler)this.toggleHandler.call(this.scope||this,this,A)}},focus:function(){this.el.child("button:first").focus()},disable:function(){if(this.el)this.el.addClass("x-btn-disabled");this.disabled=true},enable:function(){if(this.el)this.el.removeClass("x-btn-disabled");this.disabled=false},setDisabled:function(A){this[A!==true?"enable":"disable"]()},onClick:function(A){if(A)A.preventDefault();if(!this.disabled){if(this.enableToggle)this.toggle();if(this.menu&&!this.menu.isVisible())this.menu.show(this.el,this.menuAlign);this.fireEvent("click",this,A);if(this.handler){this.el.removeClass("x-btn-over");this.handler.call(this.scope||this,this,A)}}},onMouseOver:function(A){if(!this.disabled){this.el.addClass("x-btn-over");this.fireEvent("mouseover",this,A)}},onMouseOut:function(A){if(!A.within(this.el,true)){this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,A)}},onFocus:function(A){if(!this.disabled)this.el.addClass("x-btn-focus")},onBlur:function(A){this.el.removeClass("x-btn-focus")},onMouseDown:function(){if(!this.disabled){this.el.addClass("x-btn-click");Ext.get(document).on("mouseup",this.onMouseUp,this)}},onMouseUp:function(){this.el.removeClass("x-btn-click");Ext.get(document).un("mouseup",this.onMouseUp,this)},onMenuShow:function(A){this.el.addClass("x-btn-menu-active")},onMenuHide:function(A){this.el.removeClass("x-btn-menu-active")}})

Ext.Toolbar=function(C,A,B){if(C instanceof Array){A=C;B=A;C=null}Ext.apply(this,B);this.buttons=A;if(C)this.render(C);this.obj};Ext.Toolbar.prototype={render:function(B){this.el=Ext.get(B);if(this.cls)this.el.addClass(this.cls);this.el.update("<div class=\"x-toolbar x-small-editor\"><table cellspacing=\"0\"><tr></tr></table></div>");this.tr=this.el.child("tr",true);var A=0;this.items=new Ext.util.MixedCollection(false,function(B){return B.id||("item"+(++A))});if(this.buttons){this.add.apply(this,this.buttons);delete this.buttons}},add:function(){var B=arguments,D=B.length;for(var A=0;A<D;A++){var C=B[A];if(C.applyTo)this.addField(C);else if(C.render)this.addItem(C);else if(typeof C=="string"){if(C=="separator"||C=="-")this.addSeparator();else if(C==" ")this.addSpacer();else this.addText(C)}else if(C.tagName)this.addElement(C);else if(typeof C=="object")this.addButton(C)}},getEl:function(){return this.el},bind:function(A){this.obj=A},addSeparator:function(){return this.addItem(new Ext.Toolbar.Separator())},addSpacer:function(){return this.addItem(new Ext.Toolbar.Spacer())},addElement:function(A){return this.addItem(new Ext.Toolbar.Item(A))},addItem:function(B){var A=this.nextBlock();B.render(A);this.items.add(B);return B},addButton:function(E){if(E instanceof Array){var C=[];for(var D=0,B=E.length;D<B;D++)C.push(this.addButton(E[D]));return C}var F=E;if(!(E instanceof Ext.Toolbar.Button))F=new Ext.Toolbar.Button(E);if(this.obj){if(!F.handler){F.handler=this.obj.getToolBarEvent();F.id=this.obj.gridDiv+"_"+F.cls}F.obj=this.obj}var A=this.nextBlock();F.render(A);this.items.add(F);return F},addText:function(A){return this.addItem(new Ext.Toolbar.TextItem(A))},insertButton:function(E,F){if(F instanceof Array){var D=[];for(var C=0,B=F.length;C<B;C++)D.push(this.insertButton(E+C,F[C]));return D}if(!(F instanceof Ext.Toolbar.Button))F=new Ext.Toolbar.Button(F);var A=document.createElement("td");this.tr.insertBefore(A,this.tr.childNodes[E]);F.render(A);this.items.insert(E,F);return F},addDom:function(D,C){var A=this.nextBlock();Ext.DomHelper.overwrite(A,D);var B=new Ext.Toolbar.Item(A.firstChild);B.render(A);this.items.add(B);return B},addField:function(C){var A=this.nextBlock();C.render(A);var B=new Ext.Toolbar.Item(A.firstChild);B.render(A);this.items.add(B);return B},nextBlock:function(){var A=document.createElement("td");this.tr.appendChild(A);return A}};Ext.Toolbar.Item=function(A){this.el=Ext.getDom(A);this.id=Ext.id(this.el);this.hidden=false};Ext.Toolbar.Item.prototype={getEl:function(){return this.el},render:function(A){this.td=A;A.appendChild(this.el)},destroy:function(){this.td.parentNode.removeChild(this.td)},show:function(){this.hidden=false;this.td.style.display=""},hide:function(){this.hidden=true;this.td.style.display="none"},setVisible:function(A){if(A)this.show();else this.hide()},focus:function(){Ext.fly(this.el).focus()},disable:function(){Ext.fly(this.td).addClass("x-item-disabled");this.disabled=true;this.el.disabled=true},enable:function(){Ext.fly(this.td).removeClass("x-item-disabled");this.disabled=false;this.el.disabled=false}};Ext.Toolbar.Separator=function(){var A=document.createElement("span");A.className="ytb-sep";Ext.Toolbar.Separator.superclass.constructor.call(this,A)};Ext.extend(Ext.Toolbar.Separator,Ext.Toolbar.Item);Ext.Toolbar.Spacer=function(){var A=document.createElement("div");A.className="ytb-spacer";Ext.Toolbar.Separator.superclass.constructor.call(this,A)};Ext.extend(Ext.Toolbar.Spacer,Ext.Toolbar.Item);Ext.Toolbar.TextItem=function(A){var B=document.createElement("span");B.className="ytb-text";B.innerHTML=A;Ext.Toolbar.TextItem.superclass.constructor.call(this,B)};Ext.extend(Ext.Toolbar.TextItem,Ext.Toolbar.Item);Ext.Toolbar.Button=function(A){Ext.Toolbar.Button.superclass.constructor.call(this,null,A)};Ext.extend(Ext.Toolbar.Button,Ext.Button,{render:function(A){this.td=A;Ext.Toolbar.Button.superclass.render.call(this,A)},destroy:function(){Ext.Toolbar.Button.superclass.destroy.call(this);this.td.parentNode.removeChild(this.td)},show:function(){this.hidden=false;this.td.style.display=""},hide:function(){this.hidden=true;this.td.style.display="none"},disable:function(){Ext.fly(this.td).addClass("x-item-disabled");this.disabled=true},enable:function(){Ext.fly(this.td).removeClass("x-item-disabled");this.disabled=false}});Ext.ToolbarButton=Ext.Toolbar.Button;Ext.Toolbar.MenuButton=function(A){Ext.Toolbar.MenuButton.superclass.constructor.call(this,null,A)};Ext.extend(Ext.Toolbar.MenuButton,Ext.MenuButton,{render:function(A){this.td=A;Ext.Toolbar.MenuButton.superclass.render.call(this,A)},destroy:function(){Ext.Toolbar.MenuButton.superclass.destroy.call(this);this.td.parentNode.removeChild(this.td)},show:function(){this.hidden=false;this.td.style.display=""},hide:function(){this.hidden=true;this.td.style.display="none"}})
Ext.form.VTypes = function(){
    // closure these in so they are only created once.
    var alpha = /^[a-zA-Z\ _]+$/;
    var alphanum = /^[a-zA-Z0-9\ _]+$/;
    var email = /^([\w]+)(.[\w]+)*@([\w-]+\.){1,5}([A-Za-z]){2,4}$/;
    var url = /(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;

    var chn = /[^\xB0-\xF7]+$/;//davi

    // All these messages and functions are configurable
    return {
        //email
        'email' : function(v){
            return email.test(v);
        },
        'emailText' : 'This field should be an e-mail address in the format "user@domain.com"',
        'emailMask' : /[a-z0-9_\.\-@]/i,

        //url
        'url' : function(v){
            return url.test(v);
        },
        'urlText' : 'This field should be a URL in the format "http:/'+'/www.domain.com"',

        //英文字母
        'alpha' : function(v){
            return alpha.test(v);
        },
        'alphaText' : 'This field should only contain letters and _',
        'alphaMask' : /[a-z\ _]/i,

        //英文字母和数字和下划线和点
        'alphanum' : function(v){
            return alphanum.test(v);
        },
        'alphanumText' : 'This field should only contain letters, numbers and _',
        'alphanumMask' : /[a-z0-9\.\ _]/i,//davi

        //整数------
        'integer' : function(v){
            return alphanum.test(v);
        },
        'integerText' : 'This field should only contain letters, integer',
        'integerMask' : /[0-9]/i,

        //数值型
        'number' : function(v){
            var sign = v.indexOf('-')>=0 ? '-' : '+';
            return IsNumber(v, sign);//double.test(v);
        },
        'numberText' : 'This field should only contain letters, number',
        'numberMask' : /[0-9\.]/i,

        //汉字和英文字母
        'chn' : function(v){
            return chn.test(v);
        },
        'chnText' : 'This field should only contain letters, number',
        'chnMask' : /[\xB0-\xF7a-z0-9\.\/\#\,\ _-]/i
    };
}();
//Ext.PagingToolbar=function(B,A,C){Ext.PagingToolbar.superclass.constructor.call(this,B,null,C);this.ds=A;this.cursor=0;this.renderButtons(this.el);this.bind(A)};Ext.extend(Ext.PagingToolbar,Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"\u7b2c&nbsp;",afterPageText:"&nbsp;/&nbsp;{0}&nbsp;\u9875",firstText:"\u7b2c\u4e00\u9875",prevText:"\u4e0a\u4e00\u9875",nextText:"\u4e0b\u4e00\u9875",lastText:"\u6700\u540e\u4e00\u9875",refreshText:"\u5237\u65b0",renderButtons:function(A){this.first=this.addButton({tooltip:this.firstText,cls:"x-btn-icon x-grid-page-first",disabled:true,handler:this.onClick.createDelegate(this,["first"])});this.prev=this.addButton({tooltip:this.prevText,cls:"x-btn-icon x-grid-page-prev",disabled:true,handler:this.onClick.createDelegate(this,["prev"])});this.addSeparator();this.add(this.beforePageText);this.field=Ext.get(this.addDom({tag:"input",type:"text",size:"3",value:"1",cls:"x-grid-page-number"}).el);this.field.on("keydown",this.onPagingKeydown,this);this.field.on("focus",function(){this.dom.select()});this.afterTextEl=this.addText(String.format(this.afterPageText,1));this.field.setHeight(18);this.addSeparator();this.next=this.addButton({tooltip:this.nextText,cls:"x-btn-icon x-grid-page-next",disabled:true,handler:this.onClick.createDelegate(this,["next"])});this.last=this.addButton({tooltip:this.lastText,cls:"x-btn-icon x-grid-page-last",disabled:true,handler:this.onClick.createDelegate(this,["last"])});this.addSeparator();this.loading=this.addButton({tooltip:this.refreshText,cls:"x-btn-icon x-grid-loading",disabled:true,handler:this.onClick.createDelegate(this,["refresh"])});if(this.displayInfo)this.displayEl=this.el.createChild({cls:"x-paging-info"})},updateInfo:function(){if(this.displayEl){var A=this.ds.getCount(),B=A==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+A,this.ds.getTotalCount());this.displayEl.update(B)}},onLoad:function(D,F,B){this.cursor=B.params?B.params.start:0;var A=this.getPageData(),E=A.activePage,C=A.pages;this.afterTextEl.el.innerHTML=String.format(this.afterPageText,A.pages);this.field.dom.value=E;this.first.setDisabled(E==1);this.prev.setDisabled(E==1);this.next.setDisabled(E==C);this.last.setDisabled(E==C);this.loading.enable();this.updateInfo()},getPageData:function(){var A=this.ds.getTotalCount();return{total:A,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:A<this.pageSize?1:Math.ceil(A/this.pageSize)}},onLoadError:function(){this.loading.enable()},onPagingKeydown:function(F){var C=F.getKey(),B=this.getPageData();if(C==F.RETURN){var E=this.field.dom.value,A;if(!E||isNaN(A=parseInt(E,10))){this.field.dom.value=B.activePage;return}A=Math.min(Math.max(1,A),B.pages)-1;this.ds.load({params:{start:A*this.pageSize,limit:this.pageSize}});F.stopEvent()}else if(C==F.HOME||(C==F.UP&&F.ctrlKey)||(C==F.PAGEUP&&F.ctrlKey)||(C==F.RIGHT&&F.ctrlKey)||C==F.END||(C==F.DOWN&&F.ctrlKey)||(C==F.LEFT&&F.ctrlKey)||(C==F.PAGEDOWN&&F.ctrlKey)){A=(C==F.HOME||(C==F.DOWN&&F.ctrlKey)||(C==F.LEFT&&F.ctrlKey)||(C==F.PAGEDOWN&&F.ctrlKey))?1:B.pages;this.field.dom.value=A;this.ds.load({params:{start:(A-1)*this.pageSize,limit:this.pageSize}});F.stopEvent()}else if(C==F.UP||C==F.RIGHT||C==F.PAGEUP||C==F.DOWN||C==F.LEFT||C==F.PAGEDOWN){var E=this.field.dom.value,A,D=(F.shiftKey)?10:1;if(C==F.DOWN||C==F.LEFT||C==F.PAGEDOWN)D*=-1;if(!E||isNaN(A=parseInt(E,10))){this.field.dom.value=B.activePage;return}else if(parseInt(E,10)+D>=1&parseInt(E,10)+D<=B.pages){this.field.dom.value=parseInt(E,10)+D;A=Math.min(Math.max(1,A+D),B.pages)-1;this.ds.load({params:{start:A*this.pageSize,limit:this.pageSize}})}F.stopEvent()}},beforeLoad:function(){if(this.loading)this.loading.disable()},onClick:function(E){var C=this.ds;switch(E){case"first":C.load({params:{start:0,limit:this.pageSize}});break;case"prev":C.load({params:{start:Math.max(0,this.cursor-this.pageSize),limit:this.pageSize}});break;case"next":C.load({params:{start:this.cursor+this.pageSize,limit:this.pageSize}});break;case"last":var D=C.getTotalCount(),B=D%this.pageSize,A=B?(D-B):D-this.pageSize;C.load({params:{start:A,limit:this.pageSize}});break;case"refresh":C.load({params:{start:this.cursor,limit:this.pageSize}});break}},unbind:function(A){A.un("beforeload",this.beforeLoad,this);A.un("load",this.onLoad,this);A.un("loadexception",this.onLoadError,this)},bind:function(A){A.on("beforeload",this.beforeLoad,this);A.on("load",this.onLoad,this);A.on("loadexception",this.onLoadError,this)}})

//Ext.Editor=function(B,A){Ext.Editor.superclass.constructor.call(this,A);this.field=B;this.addEvents({"beforestartedit":true,"startedit":true,"beforecomplete":true,"complete":true,"specialkey":true})};Ext.extend(Ext.Editor,Ext.Component,{value:"",alignment:"c-c?",shadow:"frame",updateEl:false,onRender:function(B,A){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:B,shim:this.shim,shadowOffset:3,id:this.id});this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden");this.field.render(this.el);if(Ext.isGecko)this.field.el.dom.setAttribute("autocomplete","off");this.field.show();this.field.on("blur",this.onBlur,this);this.relayEvents(this.field,["specialkey"]);if(this.field.grow)this.field.on("autosize",this.el.sync,this.el,{delay:1})},startEdit:function(B,A){if(this.editing)this.completeEdit();this.boundEl=Ext.get(B);var D=A!==undefined?A:this.boundEl.dom.innerHTML;if(!this.rendered)this.render(this.parentEl||document.body);if(this.fireEvent("beforestartedit",this,this.boundEl,D)===false)return;if(this.field.multiple=="true"||this.field.comboBox){this.field.setValue(D);this.startValue=this.getValue()}else{this.startValue=D;this.field.setValue(D)}if(this.autoSize){var C=this.boundEl.getSize();switch(this.autoSize){case"width":this.setSize(C.width,"");break;case"height":this.setSize("",C.height);break;default:this.setSize(C.width,C.height)}}this.el.alignTo(this.boundEl,this.alignment);this.editing=true;if(Ext.QuickTips)Ext.QuickTips.disable();this.show()},setSize:function(A,B){this.field.setSize(A,B);if(this.el)this.el.sync()},realign:function(){this.el.alignTo(this.boundEl,this.alignment)},completeEdit:function(B){if(!this.editing)return;var C=this.getValue();if(this.revertInvalid!==false&&!this.field.isValid()){C=this.startValue;this.cancelEdit(true)}if(String(C)==String(this.startValue)&&this.ignoreNoChange){this.editing=false;this.hide();return}if(this.fireEvent("beforecomplete",this,C,this.startValue)!==false){this.editing=false;if(this.updateEl&&this.boundEl)this.boundEl.update(C);if(B!==true)this.hide();if(this.field.multiple=="true"||this.field.comboBox){var A=this.field.getValue();C=A+"|"+C}this.fireEvent("complete",this,C,this.startValue)}},onShow:function(){this.el.show();if(this.hideEl!==false)this.boundEl.hide();this.field.show();this.field.focus();this.fireEvent("startedit",this.boundEl,this.startValue)},cancelEdit:function(A){if(this.editing){this.setValue(this.startValue);if(A!==true)this.hide()}},onBlur:function(){if(this.allowBlur!==true&&this.editing)this.completeEdit()},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();if(this.field.collapse)this.field.collapse();this.el.hide();if(this.hideEl!==false)this.boundEl.show();if(Ext.QuickTips)Ext.QuickTips.enable()},setValue:function(A){this.field.setValue(A)},getValue:function(){return this.field.getValue()}})

//Ext.tree.TreeNode=function(B){B=B||{};if(typeof B=="string")B={text:B};this.childrenRendered=false;this.rendered=false;Ext.tree.TreeNode.superclass.constructor.call(this,B);this.expanded=B.expanded===true;this.isTarget=B.isTarget!==false;this.draggable=B.draggable!==false&&B.allowDrag!==false;this.allowChildren=B.allowChildren!==false&&B.allowDrop!==false;this.text=B.text;this.disabled=B.disabled===true;this.treeDiv=B.treeDiv;this.addEvents({"textchange":true,"beforeexpand":true,"beforecollapse":true,"expand":true,"disabledchange":true,"collapse":true,"beforeclick":true,"click":true,"dblclick":true,"contextmenu":true,"beforechildrenrendered":true});var A=this.attributes.uiProvider||Ext.tree.TreeNodeUI;this.ui=new A(this)};Ext.extend(Ext.tree.TreeNode,Ext.data.Node,{preventHScroll:true,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},setFirstChild:function(B){var A=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,B);if(this.childrenRendered&&A&&B!=A)A.renderIndent(true,true);if(this.rendered)this.renderIndent(true,true)},setLastChild:function(A){var B=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,A);if(this.childrenRendered&&B&&A!=B)B.renderIndent(true,true);if(this.rendered)this.renderIndent(true,true)},appendChild:function(){var A=Ext.tree.TreeNode.superclass.appendChild.apply(this,arguments);if(A&&this.childrenRendered)A.render();this.ui.updateExpandIcon();return A},removeChild:function(A){this.ownerTree.getSelectionModel().unselect(A);Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(this.childrenRendered)A.ui.remove();if(this.childNodes.length<1)this.collapse(false,false);else this.ui.updateExpandIcon();return A},insertBefore:function(C,A){var B=Ext.tree.TreeNode.superclass.insertBefore.apply(this,arguments);if(B&&A&&this.childrenRendered)C.render();this.ui.updateExpandIcon();return B},setText:function(B){var A=this.text;this.text=B;this.attributes.text=B;if(this.rendered)this.ui.onTextChange(this,B,A);this.fireEvent("textchange",this,B,A)},select:function(){this.getOwnerTree().getSelectionModel().select(this)},unselect:function(){this.getOwnerTree().getSelectionModel().unselect(this)},isSelected:function(){return this.getOwnerTree().getSelectionModel().isSelected(this)},expand:function(C,A,B){if(!this.expanded){if(this.fireEvent("beforeexpand",this,C,A)===false)return;if(!this.childrenRendered)this.renderChildren();this.expanded=true;if(!this.isHiddenRoot()&&(this.getOwnerTree().animate&&A!==false)||A){this.ui.animExpand(function(){this.fireEvent("expand",this);if(typeof B=="function")B(this);if(C===true)this.expandChildNodes(true)}.createDelegate(this));return}else{this.ui.expand();this.fireEvent("expand",this);if(typeof B=="function")B(this)}}else if(typeof B=="function")B(this);if(C===true)this.expandChildNodes(true)},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(E,B){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,E,B)===false)return;this.expanded=false;if((this.getOwnerTree().animate&&B!==false)||B){this.ui.animCollapse(function(){this.fireEvent("collapse",this);if(E===true)this.collapseChildNodes(true)}.createDelegate(this));return}else{this.ui.collapse();this.fireEvent("collapse",this)}}if(E===true){var D=this.childNodes;for(var C=0,A=D.length;C<A;C++)D[C].collapse(true)}},delayedExpand:function(A){if(!this.expandProcId)this.expandProcId=this.expand.defer(A,this)},cancelExpand:function(){if(this.expandProcId)clearTimeout(this.expandProcId);this.expandProcId=false},toggle:function(){if(this.expanded)this.collapse();else this.expand()},ensureVisible:function(B){var A=this.getOwnerTree();A.expandPath(this.getPath(),false,function(){A.getEl().scrollChildIntoView(this.ui.anchor);Ext.callback(B)}.createDelegate(this))},expandChildNodes:function(D){var C=this.childNodes;for(var B=0,A=C.length;B<A;B++)C[B].expand(D)},collapseChildNodes:function(C){var D=this.childNodes;for(var B=0,A=D.length;B<A;B++)D[B].collapse(C)},disable:function(){this.disabled=true;this.unselect();if(this.rendered&&this.ui.onDisableChange)this.ui.onDisableChange(this,true);this.fireEvent("disabledchange",this,true)},enable:function(){this.disabled=false;if(this.rendered&&this.ui.onDisableChange)this.ui.onDisableChange(this,false);this.fireEvent("disabledchange",this,false)},renderChildren:function(D){if(D!==false)this.fireEvent("beforechildrenrendered",this);var C=this.childNodes;for(var B=0,A=C.length;B<A;B++)C[B].render(true);this.childrenRendered=true},sort:function(E,C){Ext.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var D=this.childNodes;for(var B=0,A=D.length;B<A;B++)D[B].render(true)}},render:function(A){this.ui.render(A);if(!this.rendered){this.rendered=true;if(this.expanded){this.expanded=false;this.expand(false,false)}}},renderIndent:function(E,C){if(C)this.ui.childIndent=null;this.ui.renderIndent();if(E===true&&this.childrenRendered){var D=this.childNodes;for(var B=0,A=D.length;B<A;B++)D[B].renderIndent(true,C)}}})

//Ext.form.Field=function(A){Ext.form.Field.superclass.constructor.call(this,A);this.addEvents({focus:true,blur:true,specialkey:true,change:true,invalid:true,valid:true})};Ext.extend(Ext.form.Field,Ext.Component,{invalidClass:"x-form-invalid",invalidText:"\u8bf7\u8f93\u5165{0}\uff01",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:true,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",inputType:undefined,isFormField:true,hasFocus:false,value:undefined,getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:(this.hiddenName||"")},applyTo:function(A){this.target=A;this.el=Ext.get(A);this.render(this.el.dom.parentNode);return this},onRender:function(D,B){if(this.el){this.el=Ext.get(this.el);if(!this.target)D.dom.appendChild(this.el.dom)}else{var A=this.getAutoCreate();if(!A.name)A.name=this.name||this.id;if(this.inputType)A.type=this.inputType;if(this.tabIndex!==undefined)A.tabIndex=this.tabIndex;this.el=D.createChild(A,B)}var C=this.el.dom.type;if(C){if(C=="password")C="text";this.el.addClass("x-form-"+C)}if(!this.customSize&&(this.width||this.height))this.setSize(this.width||"",this.height||"");if(this.readOnly)this.el.dom.readOnly=true;this.el.addClass([this.fieldClass,this.cls]);this.initValue()},initValue:function(){if(this.value!==undefined)this.setValue(this.value);else if(this.el.dom.value.length>0)this.setValue(this.el.dom.value)},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents()},fireKey:function(A){if(A.isNavKeyPress())this.fireEvent("specialkey",this,A)},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.el.on(Ext.isIE?"keydown":"keypress",this.fireKey,this);this.el.on("focus",this.onFocus,this);this.el.on("blur",this.onBlur,this);this.originalValue=this.getValue()},onFocus:function(){if(!Ext.isOpera)this.el.addClass(this.focusClass);this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this)},onBlur:function(){this.el.removeClass(this.focusClass);this.hasFocus=false;if(this.validationEvent!==false&&this.validateOnBlur&&this.validationEvent!="blur")this.validate();var A=this.getValue();if(A!=this.startValue)this.fireEvent("change",this,A,this.startValue);this.fireEvent("blur",this)},setSize:function(A,B){if(!this.rendered||!this.el){this.width=A;this.height=B;return}if(A){A=this.adjustWidth(this.el.dom.tagName,A);this.el.setWidth(A)}if(B)this.el.setHeight(B);var B=this.el.dom.offsetHeight},isValid:function(A){if(this.disabled)return true;var B=this.preventMark;this.preventMark=A===true;var C=this.validateValue(this.getRawValue());this.preventMark=B;return C},validate:function(){if(this.disabled||this.validateValue(this.getRawValue())){this.clearInvalid();return true}return false},validateValue:function(A){return true},markInvalid:function(A){if(!this.rendered||this.preventMark)return;this.el.addClass(this.invalidClass);A=A||this.invalidText;switch(this.msgTarget){case"qtip":this.el.dom.qtip=A;this.el.dom.qclass="x-form-invalid-tip";break;case"title":this.el.dom.title=A;break;case"under":if(!this.errorEl){var B=this.el.findParent(".x-form-element",5,true);this.errorEl=B.createChild({cls:"x-form-invalid-msg"});this.errorEl.setWidth(B.getWidth(true)-20)}this.errorEl.update(A);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case"side":if(!this.errorIcon){B=this.el.findParent(".x-form-element",5,true);this.errorIcon=B.createChild({cls:"x-form-invalid-icon"})}this.alignErrorIcon();this.errorIcon.dom.qtip=A;this.errorIcon.dom.qclass="x-form-invalid-tip";this.errorIcon.show();break;default:var C=Ext.getDom(this.msgTarget);C.innerHTML=A;C.style.display=this.msgDisplay;break}this.fireEvent("invalid",this,A)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},clearInvalid:function(){if(!this.rendered||this.preventMark)return;this.el.removeClass(this.invalidClass);switch(this.msgTarget){case"qtip":this.el.dom.qtip="";break;case"title":this.el.dom.title="";break;case"under":if(this.errorEl)Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this);break;case"side":if(this.errorIcon){this.errorIcon.dom.qtip="";this.errorIcon.hide()}break;default:var A=Ext.getDom(this.msgTarget);A.innerHTML="";A.style.display="none";break}this.fireEvent("valid",this)},getRawValue:function(){return this.el.getValue()},getValue:function(){var A=this.el.getValue();if(A==this.emptyText||A===undefined)A="";return A},setRawValue:function(A){return this.el.dom.value=A},setValue:function(A){this.value=A;if(this.rendered){this.el.dom.value=A;this.validate()}},adjustWidth:function(B,A){B=B.toLowerCase();if(typeof A=="number"&&Ext.isStrict&&!Ext.isSafari)if(Ext.isIE&&(B=="input"||B=="textarea")){if(B=="input")return A+2;if(B="textarea")return A-2}else if(Ext.isGecko&&B=="textarea")return A-6;else if(Ext.isOpera){if(B=="input")return A+2;if(B="textarea")return A-2}return A}});Ext.form.Field.msgFx={normal:{show:function(A,B){A.setDisplayed("block")},hide:function(A,B){A.setDisplayed(false).update("")}},slide:{show:function(A,B){A.slideIn("t",{stopFx:true})},hide:function(B,A){B.slideOut("t",{stopFx:true,useDisplay:true})}},slideRight:{show:function(B,A){B.fixDisplay();B.alignTo(A.el,"tl-tr");B.slideIn("l",{stopFx:true})},hide:function(B,A){B.slideOut("l",{stopFx:true,useDisplay:true})}}}

//Ext.form.TextField=function(A){Ext.form.TextField.superclass.constructor.call(this,A);this.addEvents({autosize:true})};Ext.extend(Ext.form.TextField,Ext.form.Field,{grow:false,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:false,allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:false,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this);if(this.validationEvent=="keyup"){this.validationTask=new Ext.util.DelayedTask(this.validate,this);this.el.on("keyup",this.filterValidation,this)}else if(this.validationEvent!==false)this.el.on(this.validationEvent,this.validate,this,{buffer:this.validationDelay});if(this.selectOnFocus||this.emptyText){this.on("focus",this.preFocus,this);if(this.emptyText){this.on("blur",this.postBlur,this);this.applyEmptyText()}}if(this.maskRe||(this.vtype&&this.disableKeyFilter!==true&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"])))this.el.on("keypress",this.filterKeys,this);if(this.grow){this.el.on("keyup",this.onKeyUp,this,{buffer:50});this.el.on("click",this.autoSize,this)}},filterValidation:function(A){if(!A.isNavKeyPress())this.validationTask.delay(this.validationDelay)},onKeyUp:function(A){if(!A.isNavKeyPress())this.autoSize()},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){if(this.rendered&&this.emptyText&&this.getRawValue().length<1){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}},preFocus:function(){if(this.emptyText){if(this.getRawValue()==this.emptyText)this.setRawValue("");this.el.removeClass(this.emptyClass)}if(this.selectOnFocus)this.el.dom.select()},postBlur:function(){this.applyEmptyText()},filterKeys:function(C){var A=C.getKey();if(!Ext.isIE&&(C.isNavKeyPress()||A==C.BACKSPACE||(A==C.DELETE&&C.button==-1)))return;var B=C.getCharCode();if(!this.maskRe.test(String.fromCharCode(B)||""))C.stopEvent()},setValue:function(A){if(A==null||A=="null")A="";if(this.emptyText&&A!==undefined&&A!==null&&A!=="")this.el.removeClass(this.emptyClass);Ext.form.TextField.superclass.setValue.apply(this,arguments)},validateValue:function(A){if(A.length<1||A===this.emptyText)if(this.allowBlank){this.clearInvalid();return true}else{this.markInvalid(this.blankText);return false}if(A.length<this.minLength){this.markInvalid(String.format(this.minLengthText,this.minLength));return false}if(A.length>this.maxLength){this.markInvalid(String.format(this.maxLengthText,this.maxLength));return false}if(this.vtype){var C=Ext.form.VTypes;if(!C[this.vtype](A)){this.markInvalid(this.vtypeText||C[this.vtype+"Text"]);return false}}if(typeof this.validator=="function"){var B=this.validator(A);if(B!==true){this.markInvalid(B);return false}}if(this.regex&&!this.regex.test(A)){this.markInvalid(this.regexText);return false}return true},selectText:function(B,C){var E=this.getRawValue();if(E.length>0){B=B===undefined?0:B;C=C===undefined?E.length:C;var A=this.el.dom;if(A.setSelectionRange)A.setSelectionRange(B,C);else if(A.createTextRange){var D=A.createTextRange();D.moveStart("character",B);D.moveEnd("character",E.length-C);D.select()}}},autoSize:function(){if(!this.grow||!this.rendered)return;if(!this.metrics)this.metrics=Ext.util.TextMetrics.createInstance(this.el);var B=this.el,C=B.dom.value+"&#160;",A=Math.min(this.growMax,Math.max(this.metrics.getWidth(C)+10,this.growMin));this.el.setWidth(A);this.fireEvent("autosize",this,A)}})

//Ext.form.TriggerField=function(A){Ext.form.TriggerField.superclass.constructor.call(this,A);this.mimicing=false;this.on("disable",this.disableWrapper,this);this.on("enable",this.enableWrapper,this)};Ext.extend(Ext.form.TriggerField,Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:false,autoSize:Ext.emptyFn,monitorTab:true,customSize:true,setSize:function(A,B){if(!this.wrap){this.width=A;this.height=B;return}if(A){var C=A;A=A-this.trigger.getWidth();Ext.form.TriggerField.superclass.setSize.call(this,A,B);this.wrap.setWidth(C);if(this.onResize)this.onResize(C,B)}else{Ext.form.TriggerField.superclass.setSize.call(this,A,B);this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())}},alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},onRender:function(B,A){Ext.form.TriggerField.superclass.onRender.call(this,B,A);this.wrap=this.el.wrap({cls:"x-form-field-wrap"});this.trigger=this.wrap.createChild({tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.triggerClass});this.trigger.on("click",this.onTriggerClick,this,{preventDefault:true});this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click");if(this.hideTrigger)this.trigger.setDisplayed(false);this.setSize(this.width||"",this.height||"")},onDestroy:function(){if(this.trigger){this.trigger.removeAllListeners();this.trigger.remove()}if(this.wrap)this.wrap.remove();Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this);if(!this.mimicing){this.mimicing=true;Ext.get(Ext.isIE?document.body:document).on("mousedown",this.mimicBlur,this);if(this.monitorTab)this.el.on("keydown",this.checkTab,this)}},checkTab:function(A){if(A.getKey()==A.TAB)this.triggerBlur()},onBlur:function(){},mimicBlur:function(B,A){if(!this.wrap.contains(A)&&this.validateBlur())this.triggerBlur()},triggerBlur:function(){this.mimicing=false;Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur);if(this.monitorTab)this.el.un("keydown",this.checkTab,this);Ext.form.TriggerField.superclass.onBlur.call(this)},validateBlur:function(B,A){return true},disableWrapper:function(){if(this.wrap)this.wrap.addClass("x-item-disabled")},enableWrapper:function(){if(this.wrap)this.wrap.removeClass("x-item-disabled")},onShow:function(){if(this.wrap){this.wrap.dom.style.display="";this.wrap.dom.style.visibility="visible"}},onHide:function(){this.wrap.dom.style.display="none"},onTriggerClick:Ext.emptyFn})

//Ext.form.DateField=function(C){Ext.form.DateField.superclass.constructor.call(this,C);if(typeof this.minValue=="string")this.minValue=this.parseDate(this.minValue);if(typeof this.maxValue=="string")this.maxValue=this.parseDate(this.maxValue);this.ddMatch=null;if(this.disabledDates){var A=this.disabledDates,D="(?:";for(var B=0;B<A.length;B++){D+=A[B];if(B!=A.length-1)D+="|"}this.ddMatch=new RegExp(D+")")}};Ext.extend(Ext.form.DateField,Ext.form.TriggerField,{format:"m/d/y",disabledDays:null,disabledDaysText:"Disabled",disabledDates:null,disabledDatesText:"Disabled",minValue:null,maxValue:null,minText:"The date in this field must be after {0}",maxText:"The date in this field must be before {0}",invalidText:"\u8bf7\u8f93\u5165{0}\uff01",triggerClass:"x-form-date-trigger",defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},validateValue:function(E){E=this.formatDate(E);if(!Ext.form.DateField.superclass.validateValue.call(this,E))return false;if(E.length<1)return true;var D=E;E=this.parseDate(E);if(!E){this.markInvalid(String.format(this.invalidText,D,this.format));return false}var F=E.getTime();if(this.minValue&&F<this.minValue.getTime()){this.markInvalid(String.format(this.minText,this.formatDate(this.minValue)));return false}if(this.maxValue&&F>this.maxValue.getTime()){this.markInvalid(String.format(this.maxText,this.formatDate(this.maxValue)));return false}if(this.disabledDays){var C=E.getDay();for(var B=0;B<this.disabledDays.length;B++)if(C===this.disabledDays[B]){this.markInvalid(this.disabledDaysText);return false}}var A=this.formatDate(E);if(this.ddMatch&&this.ddMatch.test(A)){this.markInvalid(String.format(this.disabledDatesText,A));return false}return true},validateBlur:function(){return!this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},getFieldValue:function(){return Ext.form.DateField.superclass.getValue.call(this)},onlyYearValue:function(){return this.getFieldValue().length==5},setValue:function(A){Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(A)))},parseDate:function(A){return(!A||A instanceof Date)?A:(A.length==5?Date.parseDate(A,"Y\u5e74"):Date.parseDate(A,this.format))},formatDate:function(A){return(!A||!(A instanceof Date))?A:A.dateFormat(this.format)},menuListeners:{select:function(B,A){this.setValue(A)},show:function(){this.onFocus()},hide:function(){this.focus();var A=this.menuListeners;this.menu.un("select",A.select,this);this.menu.un("show",A.show,this);this.menu.un("hide",A.hide,this)}},onTriggerClick:function(){if(this.disabled)return;if(this.menu==null)this.menu=new Ext.menu.DateMenu();Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.ddMatch,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue)),input:this});this.menu.on(Ext.apply({},this.menuListeners,{scope:this}));this.menu.picker.setValue(this.getValue()||new Date());this.menu.show(this.el,"tl-bl?")}})

//Ext.form.ComboBox=function(G){Ext.form.ComboBox.superclass.constructor.call(this,G);this.addEvents({"expand":true,"collapse":true,"beforeselect":true,"select":true,"beforequery":true});if(this.transform){var H=Ext.getDom(this.transform);if(!this.hiddenName)this.hiddenName=H.name;if(!this.store){this.mode="local";var C=[],F=H.options;for(var D=0,B=F.length;D<B;D++){var A=F[D],E=(Ext.isIE?A.getAttributeNode("value").specified:A.hasAttribute("value"))?A.value:A.text;if(A.selected)this.value=E;C.push([E,A.text])}this.store=new Ext.data.SimpleStore({"id":0,fields:["value","text"],data:C});this.valueField="value";this.displayField="text"}H.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(H,this.autoCreate||this.defaultAutoCreate);H.parentNode.removeChild(H);this.render(this.el.parentNode)}else H.parentNode.removeChild(H)}this.selectedIndex=-1;if(this.mode=="local"){if(G.queryDelay===undefined)this.queryDelay=10;if(G.minChars===undefined)this.minChars=0}};Ext.extend(Ext.form.ComboBox,Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listWidth:undefined,displayField:undefined,valueField:undefined,hiddenName:undefined,listClass:"",selectedClass:"x-combo-selected",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,triggerAction:"query",minChars:4,typeAhead:false,queryDelay:500,pageSize:0,selectOnFocus:false,queryParam:"query",loadingText:"Loading...",resizable:false,handleHeight:8,editable:true,allQuery:"",mode:"remote",minListWidth:70,forceSelection:false,typeAheadDelay:250,valueNotFoundText:undefined,onRender:function(C,A){Ext.form.ComboBox.superclass.onRender.call(this,C,A);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:this.hiddenName},"before",true);this.hiddenField.value=this.hiddenValue!==undefined?this.hiddenValue:this.value!==undefined?this.value:"";this.el.dom.removeAttribute("name")}if(Ext.isGecko)this.el.dom.setAttribute("autocomplete","off");var B="x-combo-list";this.list=new Ext.Layer({shadow:this.shadow,cls:[B,this.listClass].join(" "),constrain:false});this.list.setWidth(this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth));this.list.swallowEvent("mousewheel");this.assetHeight=0;if(this.title){this.header=this.list.createChild({cls:B+"-hd",html:this.title});this.assetHeight+=this.header.getHeight()}this.innerList=this.list.createChild({cls:B+"-inner"});this.innerList.on("mouseover",this.onViewOver,this);this.innerList.on("mousemove",this.onViewMove,this);if(this.pageSize){this.footer=this.list.createChild({cls:B+"-ft"});this.pageTb=new Ext.PagingToolbar(this.footer,this.store,{pageSize:this.pageSize});this.assetHeight+=this.footer.getHeight()}if(!this.tpl)this.tpl="<div class=\""+B+"-item\">{"+this.displayField+"}</div>";this.view=new Ext.View(this.innerList,this.tpl,{singleSelect:true,store:this.store,selectedClass:this.selectedClass});this.view.on("click",this.onViewClick,this);this.store.on("beforeload",this.onBeforeLoad,this);this.store.on("load",this.onLoad,this);this.store.on("loadexception",this.collapse,this);if(this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:true,handles:"se"});this.resizer.on("resize",function(B,A,C){this.maxHeight=C-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight;this.listWidth=A;this.restrictHeight()},this);this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px")}if(!this.editable){this.editable=true;this.setEditable(false)}},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{"up":function(A){this.inKeyMode=true;this.selectPrev()},"down":function(A){if(!this.isExpanded())this.onTriggerClick();else{this.inKeyMode=true;this.selectNext()}},"enter":function(A){this.onViewClick()},"esc":function(A){this.collapse()},"tab":function(A){this.onViewClick(false);return true},scope:this,doRelay:function(A,C,B){if(B=="down"||this.scope.isExpanded())return Ext.KeyNav.prototype.doRelay.apply(this,arguments);return true}});this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250);this.dqTask=new Ext.util.DelayedTask(this.initQuery,this);if(this.typeAhead)this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this);if(this.editable!==false)this.el.on("keyup",this.onKeyUp,this);if(this.forceSelection)this.on("blur",this.doForce,this)},onDestroy:function(){if(this.view){this.view.setStore(null);this.view.el.removeAllListeners();this.view.el.remove();this.view.purgeListeners()}if(this.list)this.list.destroy();if(this.store){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("loadexception",this.collapse,this)}Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(A){if(A.isNavKeyPress()&&!this.list.isVisible())this.fireEvent("specialkey",this,A)},onResize:function(A,B){if(this.list&&this.listWidth===undefined)this.list.setWidth(Math.max(A,this.minListWidth))},setEditable:function(A){if(A==this.editable)return;this.editable=A;if(!A){this.el.dom.setAttribute("readOnly",true);this.el.on("mousedown",this.onTriggerClick,this);this.el.addClass("x-combo-noedit")}else{this.el.dom.setAttribute("readOnly",false);this.el.un("mousedown",this.onTriggerClick,this);this.el.removeClass("x-combo-noedit")}},onBeforeLoad:function(){if(!this.hasFocus)return;this.innerList.update(this.loadingText?"<div class=\"loading-indicator\">"+this.loadingText+"</div>":"");this.restrictHeight();this.selectedIndex=-1},onLoad:function(){if(!this.hasFocus)return;if(this.store.getCount()>0){this.expand();this.restrictHeight();if(this.lastQuery==this.allQuery){if(this.editable)this.el.dom.select();if(!this.selectByValue(this.value,true))this.select(0,true)}else{this.selectNext();if(this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE)this.taTask.delay(this.typeAheadDelay)}}else this.onEmptyResults()},onTypeAhead:function(){if(this.store.getCount()>0){var C=this.store.getAt(0),B=C.data[this.displayField],A=B.length,D=this.getRawValue().length;if(D!=A){this.setRawValue(B);this.selectText(D,B.length)}}},onSelect:function(B,A){if(this.fireEvent("beforeselect",this,B,A)!==false){this.setValue(B.data[this.valueField||this.displayField]);this.collapse();this.fireEvent("select",this,B,A)}},getValue:function(){if(this.valueField){if(this.el.dom.key){var A=this.el.dom.key;if(A.indexOf("|")>=0)A=A.split("|")[0];return A}else return typeof this.value!="undefined"?this.value:""}else return Ext.form.ComboBox.superclass.getValue.call(this)},getText:function(){if(this.valueField){if(this.el.dom.key){var A=this.el.dom.value;if(A.indexOf("|")>=0)A=A.split("|")[1];return A}else return typeof this.value!="undefined"?this.value:""}else return Ext.form.ComboBox.superclass.getValue.call(this)},clearValue:function(){if(this.hiddenField)this.hiddenField.value="";this.setRawValue("");this.lastSelectionText=""},setValue:function(D){if(D==null||D=="null")D="";var B=D;if(this.valueField){var C=this.findRecord(this.valueField,D);if(C)B=C.data[this.displayField];else if(this.valueNotFoundText)B=this.valueNotFoundText}if(B.indexOf("|")>=0){var A=B.split("|");B=A[1];this.el.dom.key=A[0]}this.lastSelectionText=B;if(this.hiddenField)this.hiddenField.value=D;Ext.form.ComboBox.superclass.setValue.call(this,B);this.value=D},findRecord:function(C,B){var A;if(this.store.getCount()>0)this.store.each(function(D,E){if(D.data[C].indexOf(B)>=0){A=D;return false}});return A},onViewMove:function(B,A){this.inKeyMode=false},onViewOver:function(D,C){if(this.inKeyMode)return;var B=this.view.findItemFromChild(C);if(B){var A=this.view.indexOf(B);this.select(A,false)}},onViewClick:function(C){var A=this.view.getSelectedIndexes()[0],B=this.store.getAt(A);if(B)this.onSelect(B,A);if(C!==false)this.el.focus()},restrictHeight:function(){this.innerList.dom.style.height="";var A=this.innerList.dom,B=Math.max(A.clientHeight,A.offsetHeight,A.scrollHeight);this.innerList.setHeight(B<this.maxHeight?"auto":this.maxHeight);this.list.beginUpdate();this.list.setHeight(this.innerList.getHeight()+this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight);this.list.alignTo(this.el,this.listAlign);this.list.endUpdate()},onEmptyResults:function(){this.collapse()},isExpanded:function(){return this.list.isVisible()},selectByValue:function(C,A){if(C!==undefined&&C!==null){var B=this.findRecord(this.valueField||this.displayField,C);if(B){this.select(this.store.indexOf(B),A);return true}}return false},select:function(A,B){this.selectedIndex=A;this.view.select(A);if(B!==false){var C=this.view.getNode(A);if(C)this.innerList.scrollChildIntoView(C)}},selectNext:function(){var A=this.store.getCount();if(A>0)if(this.selectedIndex==-1)this.select(0);else if(this.selectedIndex<A-1)this.select(this.selectedIndex+1)},selectPrev:function(){var A=this.store.getCount();if(A>0)if(this.selectedIndex==-1)this.select(0);else if(this.selectedIndex!=0)this.select(this.selectedIndex-1)},onKeyUp:function(A){if(this.editable!==false&&!A.isSpecialKey()){this.lastKey=A.getKey();this.dqTask.delay(this.queryDelay)}},validateBlur:function(){return!this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},doForce:function(){if(this.el.dom.value.length>0){this.el.dom.value=this.lastSelectionText===undefined?"":this.lastSelectionText;this.applyEmptyText()}},doQuery:function(B,A){if(B===undefined||B===null)B="";var C={query:B,forceAll:A,combo:this,cancel:false};if(this.fireEvent("beforequery",C)===false||C.cancel)return false;B=C.query;A=C.forceAll;if(A===true||(B.length>=this.minChars))if(this.lastQuery!=B){this.lastQuery=B;if(this.mode=="local"){this.selectedIndex=-1;if(A)this.store.clearFilter();else this.store.filter(this.displayField,B);this.onLoad()}else{this.store.baseParams[this.queryParam]=B;this.store.load({params:this.getParams(B)});this.expand()}}else{this.selectedIndex=-1;this.onLoad()}},getParams:function(B){var A={};if(this.pageSize){A.start=0;A.limit=this.pageSize}return A},collapse:function(){if(!this.isExpanded())return;this.list.hide();Ext.get(document).un("mousedown",this.collapseIf,this);this.fireEvent("collapse",this)},collapseIf:function(A){if(!A.within(this.wrap)&&!A.within(this.list))this.collapse()},expand:function(){if(this.isExpanded()||!this.hasFocus)return;this.list.alignTo(this.el,this.listAlign);this.list.show();Ext.get(document).on("mousedown",this.collapseIf,this);this.fireEvent("expand",this)},onTriggerClick:function(){if(this.disabled)return;if(this.isExpanded()){this.collapse();this.el.focus()}else{this.hasFocus=true;this.doQuery(this.triggerAction=="all"?this.doQuery(this.allQuery,true):this.doQuery(this.getRawValue()));this.el.focus()}}})

//----Ext.grid.Grid=function(B,A){this.container=Ext.get(B);this.container.update("");this.container.setStyle("overflow","hidden");this.container.addClass("x-grid-container");this.id=this.container.id;Ext.apply(this,A);if(this.ds){this.dataSource=this.ds;delete this.ds}if(this.cm){this.colModel=this.cm;delete this.cm}if(this.sm){this.selModel=this.sm;delete this.sm}if(this.width)this.container.setWidth(this.width);if(this.height)this.container.setHeight(this.height);this.addEvents({"click":true,"dblclick":true,"contextmenu":true,"mousedown":true,"mouseup":true,"mouseover":true,"mouseout":true,"keypress":true,"keydown":true,"cellclick":true,"celldblclick":true,"rowclick":true,"rowdblclick":true,"headerclick":true,"headerdblclick":true,"rowcontextmenu":true,"cellcontextmenu":true,"headercontextmenu":true,"bodyscroll":true,"columnresize":true,"columnmove":true,"startdrag":true,"enddrag":true,"dragdrop":true,"dragover":true,"dragenter":true,"dragout":true});Ext.grid.Grid.superclass.constructor.call(this)};Ext.extend(Ext.grid.Grid,Ext.util.Observable,{minColumnWidth:25,autoSizeColumns:false,autoSizeHeaders:true,monitorWindowResize:true,maxRowsToMeasure:0,trackMouseOver:true,enableDragDrop:false,enableColumnMove:true,enableColumnHide:true,enableRowHeightSync:false,stripeRows:true,autoHeight:false,autoExpandColumn:false,autoExpandMin:50,autoExpandMax:1000,view:null,allowTextSelectionPattern:/INPUT|TEXTAREA|SELECT/i,loadMask:false,rendered:false,render:function(){var D=this.container;if(D.getStyle("height").indexOf("%")<0){var C=D.dom.style.height,F=D.dom.style.minusHeight,B=document.documentElement.offsetHeight-55;C=C.replace("px","");if(F!=undefined){F=F.replace("px","");C=B-F}else if(D.getStyle("height")=="auto")C=B;else if(C.length==4)C=B-(C*1/10)-55;var E=Cookies.get("xrinsurtheme");D.dom.style.height=C+"px"}var A=this.getView();A.init(this);D.on("click",this.onClick,this);D.on("dblclick",this.onDblClick,this);D.on("contextmenu",this.onContextMenu,this);D.on("keydown",this.onKeyDown,this);this.relayEvents(D,["mousedown","mouseup","mouseover","mouseout","keypress"]);this.getSelectionModel().init(this);A.render();if(this.loadMask)this.loadMask=new Ext.LoadMask(this.container,Ext.apply({store:this.dataSource},this.loadMask));this.rendered=true;return this},reconfigure:function(A,B){if(this.loadMask){this.loadMask.destroy();this.loadMask=new Ext.LoadMask(this.container,Ext.apply({store:A},this.loadMask))}this.view.bind(A,B);this.dataSource=A;this.colModel=B;this.view.refresh(true)},onKeyDown:function(A){this.fireEvent("keydown",A)},destroy:function(A,C){if(this.loadMask)this.loadMask.destroy();var B=this.container;B.removeAllListeners();this.view.destroy();this.colModel.purgeListeners();if(!C)this.purgeListeners();B.update("");if(A===true)B.remove()},processEvent:function(E,G){this.fireEvent(E,G);var D=G.getTarget(),F=this.view,A=F.findHeaderIndex(D);if(A!==false)this.fireEvent("header"+E,this,A,G);else{var B=F.findRowIndex(D),C=F.findCellIndex(D);if(B!==false){this.fireEvent("row"+E,this,B,G);if(C!==false)this.fireEvent("cell"+E,this,B,C,G)}}},onClick:function(A){this.processEvent("click",A)},onContextMenu:function(B,A){this.processEvent("contextmenu",B)},onDblClick:function(A){this.processEvent("dblclick",A)},walkCells:function(E,H,C,J,A){var G=this.colModel,B=G.getColumnCount(),D=this.dataSource,I=D.getCount(),F=true;if(C<0){if(H<0){E--;F=false}while(E>=0){if(!F)H=B-1;F=false;while(H>=0){if(J.call(A||this,E,H,G)===true)return[E,H];H--}E--}}else{if(H>=B){E++;F=false}while(E<I){if(!F)H=0;F=false;while(H<B){if(J.call(A||this,E,H,G)===true)return[E,H];H++}E++}}return null},getSelections:function(){return this.selModel.getSelections()},autoSize:function(){if(this.rendered){this.view.layout();if(this.view.adjustForScroll)this.view.adjustForScroll()}},stopEditing:function(){},getSelectionModel:function(){if(!this.selModel)this.selModel=new Ext.grid.RowSelectionModel();return this.selModel},getDataSource:function(){return this.dataSource},getColumnModel:function(){return this.colModel},getView:function(){if(!this.view)this.view=new Ext.grid.GridView();return this.view},getDragDropText:function(){var A=this.selModel.getCount();return String.format(this.ddText,A,A==1?"":"s")}})

//Ext.grid.GridView=function(A){Ext.grid.GridView.superclass.constructor.call(this);this.el=null;Ext.apply(this,A)};Ext.extend(Ext.grid.GridView,Ext.grid.AbstractGridView,{rowClass:"x-grid-row",cellClass:"x-grid-col",tdClass:"x-grid-td",hdClass:"x-grid-hd",splitClass:"x-grid-split",sortClasses:["sort-asc","sort-desc"],enableMoveAnim:false,hlColor:"C3DAF9",dh:Ext.DomHelper,fly:Ext.Element.fly,css:Ext.util.CSS,borderWidth:1,splitOffset:3,scrollIncrement:22,cellRE:/(?:.*?)x-grid-(?:hd|cell|csplit)-(?:[\d]+)-([\d]+)(?:.*?)/,findRE:/\s?(?:x-grid-hd|x-grid-col|x-grid-csplit)\s/,bind:function(A,B){if(this.ds){this.ds.un("load",this.onLoad,this);this.ds.un("datachanged",this.onDataChange);this.ds.un("add",this.onAdd);this.ds.un("remove",this.onRemove);this.ds.un("update",this.onUpdate);this.ds.un("clear",this.onClear)}if(A){A.on("load",this.onLoad,this);A.on("datachanged",this.onDataChange,this);A.on("add",this.onAdd,this);A.on("remove",this.onRemove,this);A.on("update",this.onUpdate,this);A.on("clear",this.onClear,this)}this.ds=A;if(this.cm){this.cm.un("widthchange",this.onColWidthChange,this);this.cm.un("headerchange",this.onHeaderChange,this);this.cm.un("hiddenchange",this.onHiddenChange,this);this.cm.un("columnmoved",this.onColumnMove,this);this.cm.un("columnlockchange",this.onColumnLock,this)}if(B){this.generateRules(B);B.on("widthchange",this.onColWidthChange,this);B.on("headerchange",this.onHeaderChange,this);B.on("hiddenchange",this.onHiddenChange,this);B.on("columnmoved",this.onColumnMove,this);B.on("columnlockchange",this.onColumnLock,this)}this.cm=B},init:function(A){Ext.grid.GridView.superclass.init.call(this,A);this.bind(A.dataSource,A.colModel);A.on("headerclick",this.handleHeaderClick,this);if(A.trackMouseOver){A.on("mouseover",this.onRowOver,this);A.on("mouseout",this.onRowOut,this)}A.cancelTextSelection=function(){};this.gridId=A.id;var B=this.templates||{};if(!B.master){B.master=new Ext.Template("<div class=\"x-grid\" hidefocus=\"true\">","<div class=\"x-grid-topbar\"></div>","<div class=\"x-grid-scroller\"><div></div></div>","<div class=\"x-grid-locked\">","<div class=\"x-grid-header\">{lockedHeader}</div>","<div class=\"x-grid-body\">{lockedBody}</div>","</div>","<div class=\"x-grid-viewport\">","<div class=\"x-grid-header\">{header}</div>","<div class=\"x-grid-body\">{body}</div>","</div>","<div class=\"x-grid-bottombar\"></div>","<a href=\"#\" class=\"x-grid-focus\" tabIndex=\"-1\"></a>","<div class=\"x-grid-resize-proxy\">&#160;</div>","</div>");B.master.disableformats=true}if(!B.header){B.header=new Ext.Template("<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">","<tbody><tr class=\"x-grid-hd-row\">{cells}</tr></tbody>","</table>{splits}");B.header.disableformats=true}B.header.compile();if(!B.hcell){B.hcell=new Ext.Template("<td class=\"x-grid-hd x-grid-td-{id} {cellId}\"><div title=\"{title}\" class=\"x-grid-hd-inner x-grid-hd-{id}\">","<div class=\"x-grid-hd-text\" unselectable=\"on\">{value}<img class=\"x-grid-sort-icon\" src=\"",Ext.BLANK_IMAGE_URL,"\" /></div>","</div></td>");B.hcell.disableFormats=true}B.hcell.compile();if(!B.hsplit){B.hsplit=new Ext.Template("<div class=\"x-grid-split {splitId} x-grid-split-{id}\" style=\"{style}\" unselectable=\"on\">&#160;</div>");B.hsplit.disableFormats=true}B.hsplit.compile();if(!B.body){B.body=new Ext.Template("<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">","<tbody>{rows}</tbody>","</table>");B.body.disableFormats=true}B.body.compile();if(!B.row){B.row=new Ext.Template("<tr class=\"x-grid-row {alt}\">{cells}</tr>");B.row.disableFormats=true}B.row.compile();if(!B.cell){B.cell=new Ext.Template("<td class=\"x-grid-col x-grid-td-{id} {cellId} {css}\" tabIndex=\"0\">","<div class=\"x-grid-col-{id} x-grid-cell-inner\"><div class=\"x-grid-cell-text\" unselectable=\"on\" {attr}>{value}</div></div>","</td>");B.cell.disableFormats=true}B.cell.compile();this.templates=B},onColWidthChange:function(){this.updateColumns.apply(this,arguments)},onHeaderChange:function(){this.updateHeaders.apply(this,arguments)},onHiddenChange:function(){this.handleHiddenChange.apply(this,arguments)},onColumnMove:function(){this.handleColumnMove.apply(this,arguments)},onColumnLock:function(){this.handleLockChange.apply(this,arguments)},onDataChange:function(){this.refresh();this.updateHeaderSortState()},onClear:function(){this.refresh()},onUpdate:function(B,A){this.refreshRow(A)},refreshRow:function(B){var C=this.ds,A;if(typeof B=="number"){A=B;B=C.getAt(A)}else A=C.indexOf(B);var D=this.getRowComposite(A),E=[];this.insertRows(C,A,A,true);this.onRemove(C,B,A+1,true);this.syncRowHeights(A,A);this.layout();this.fireEvent("rowupdated",this,A,B)},onAdd:function(B,C,A){this.insertRows(B,A,A+(C.length-1))},onRemove:function(C,B,A,F){if(F!==true)this.fireEvent("beforerowremoved",this,A,B);var E=this.getBodyTable(),D=this.getLockedTable();if(E.rows[A])E.firstChild.removeChild(E.rows[A]);if(D.rows[A])D.firstChild.removeChild(D.rows[A]);if(F!==true){this.stripeRows(A);this.syncRowHeights(A,A);this.layout();this.fireEvent("rowremoved",this,A,B)}},onLoad:function(){this.scrollToTop()},scrollToTop:function(){if(this.scroller){this.scroller.dom.scrollTop=0;this.syncScroll()}},getHeaderPanel:function(A){if(A)this.headerPanel.show();return this.headerPanel},getFooterPanel:function(A){if(A)this.footerPanel.show();return this.footerPanel},initElements:function(){var C=Ext.Element,A=this.grid.container.dom.firstChild,B=A.childNodes;this.el=new C(A);this.headerPanel=new C(A.firstChild);this.headerPanel.enableDisplayMode("block");this.scroller=new C(B[1]);this.scrollSizer=new C(this.scroller.dom.firstChild);this.lockedWrap=new C(B[2]);this.lockedHd=new C(this.lockedWrap.dom.firstChild);this.lockedBody=new C(this.lockedWrap.dom.childNodes[1]);this.mainWrap=new C(B[3]);this.mainHd=new C(this.mainWrap.dom.firstChild);this.mainBody=new C(this.mainWrap.dom.childNodes[1]);this.footerPanel=new C(B[4]);this.footerPanel.enableDisplayMode("block");this.focusEl=new C(B[5]);this.focusEl.swallowEvent("click",true);this.resizeProxy=new C(B[6]);this.headerSelector=String.format("#{0} td.x-grid-hd, #{1} td.x-grid-hd",this.lockedHd.id,this.mainHd.id);this.splitterSelector=String.format("#{0} div.x-grid-split, #{1} div.x-grid-split",this.lockedHd.id,this.mainHd.id)},getHeaderCell:function(A){return Ext.DomQuery.select(this.headerSelector)[A]},getHeaderCellMeasure:function(A){return this.getHeaderCell(A).firstChild},getHeaderCellText:function(A){return this.getHeaderCell(A).firstChild.firstChild},getLockedTable:function(){return this.lockedBody.dom.firstChild},getBodyTable:function(){return this.mainBody.dom.firstChild},getLockedRow:function(A){return this.getLockedTable().rows[A]},getRow:function(A){return this.getBodyTable().rows[A]},getRowComposite:function(A){if(!this.rowEl)this.rowEl=new Ext.CompositeElementLite();var C=[],D,B;if(D=this.getLockedRow(A))C.push(D);if(B=this.getRow(A))C.push(B);this.rowEl.elements=C;return this.rowEl},getCell:function(D,B){var A=this.cm.getLockedCount(),C;if(B<A)C=this.lockedBody.dom.firstChild;else{C=this.mainBody.dom.firstChild;B-=A}return C.rows[D].childNodes[B]},getCellText:function(B,A){return this.getCell(B,A).firstChild.firstChild},getCellBox:function(A){var B=this.fly(A).getBox();if(Ext.isOpera)B.y=A.offsetTop+this.mainBody.getY();return B},getCellIndex:function(A){var B=String(A.className).match(this.cellRE);if(B)return parseInt(B[1],10);return 0},findHeaderIndex:function(B){var A=Ext.fly(B).findParent("td."+this.hdClass,6);return A?this.getCellIndex(A):false},findHeaderCell:function(B){var A=Ext.fly(B).findParent("td."+this.hdClass,6);return A?A:false},findRowIndex:function(B){if(!B)return false;var A=Ext.fly(B).findParent("tr."+this.rowClass,6);return A?A.rowIndex:false},findCellIndex:function(B){var A=this.el.dom;while(B&&B!=A){if(this.findRE.test(B.className))return this.getCellIndex(B);B=B.parentNode}return false},getColumnId:function(A){return this.cm.getColumnId(A)},getSplitters:function(){if(this.splitterSelector)return Ext.DomQuery.select(this.splitterSelector);else return null},getSplitter:function(A){return this.getSplitters()[A]},onRowOver:function(C,B){var A;if((A=this.findRowIndex(B))!==false)this.getRowComposite(A).addClass("x-grid-row-over")},onRowOut:function(C,B){var A;if((A=this.findRowIndex(B))!==false&&A!==this.findRowIndex(C.getRelatedTarget()))this.getRowComposite(A).removeClass("x-grid-row-over")},renderHeaders:function(){var E=this.cm,J=this.templates.hcell,I=this.templates.header,H=this.templates.hsplit,K=[],F=[],G=[],C=[],D={};for(var B=0,A=E.getColumnCount();B<A;B++){D.cellId="x-grid-hd-0-"+B;D.splitId="x-grid-csplit-0-"+B;D.id=E.getColumnId(B);D.title=E.getColumnTooltip(B)||"";D.value=E.getColumnHeader(B)||"";D.style=(this.grid.enableColumnResize===false||!E.isResizable(B)||E.isFixed(B))?"cursor:default":"";if(!E.isLocked(B)){K[K.length]=J.apply(D);G[G.length]=H.apply(D)}else{F[F.length]=J.apply(D);C[C.length]=H.apply(D)}}return[I.apply({cells:F.join(""),splits:C.join("")}),I.apply({cells:K.join(""),splits:G.join("")})]},updateHeaders:function(){var A=this.renderHeaders();this.lockedHd.update(A[0]);this.mainHd.update(A[1])},focusRow:function(A){var B=this.scroller.dom.scrollLeft;this.focusCell(A,0,false);this.scroller.dom.scrollLeft=B},focusCell:function(B,D,A){var C=this.ensureVisible(B,D,A);this.focusEl.alignTo(C,"tl-tl");if(Ext.isGecko)this.focusEl.focus();else this.focusEl.focus.defer(1,this.focusEl)},ensureVisible:function(K,E,G){if(typeof K!="number")K=K.rowIndex;if(K<0&&K>=this.ds.getCount())return;E=(E!==undefined?E:0);var D=this.grid.colModel;while(D.isHidden(E))E++;var M=this.getCell(K,E);if(!M)return;var C=this.scroller.dom,F=parseInt(M.offsetTop,10),B=parseInt(M.offsetLeft,10),N=F+M.offsetHeight,O=B+M.offsetWidth,H=C.clientHeight-this.mainHd.dom.offsetHeight,I=parseInt(C.scrollTop,10),J=parseInt(C.scrollLeft,10),A=I+H,L=J+C.clientWidth;if(F<I)C.scrollTop=F;else if(N>A)C.scrollTop=N-H;if(G!==false)if(B<J)C.scrollLeft=B;else if(O>L)C.scrollLeft=O-C.clientWidth;return M},updateColumns:function(){this.grid.stopEditing();var E=this.grid.colModel,F=this.getColumnIds(),D=0;for(var B=0,A=E.getColumnCount();B<A;B++){var C=E.getColumnWidth(B);this.css.updateRule(this.colSelector+F[B],"width",(C-this.borderWidth)+"px");this.css.updateRule(this.hdSelector+F[B],"width",(C-this.borderWidth)+"px")}this.updateSplitters()},updateSplitters:function(){var F=this.cm,G=this.getSplitters();if(G){var E=0,C=true;for(var B=0,A=F.getColumnCount();B<A;B++){if(F.isHidden(B))continue;var D=F.getColumnWidth(B);if(!F.isLocked(B)&&C){E=0;C=false}E+=D;G[B].style.left=(E-this.splitOffset)+"px"}}},handleHiddenChange:function(C,A,B){if(B)this.hideColumn(A);else this.unhideColumn(A)},hideColumn:function(A){var B=this.getColumnId(A);this.css.updateRule(this.tdSelector+B,"display","none");this.css.updateRule(this.splitSelector+B,"display","none");if(Ext.isSafari)this.updateHeaders();this.updateSplitters();this.layout()},unhideColumn:function(A){var B=this.getColumnId(A);this.css.updateRule(this.tdSelector+B,"display","");this.css.updateRule(this.splitSelector+B,"display","");if(Ext.isSafari)this.updateHeaders();this.updateSplitters();this.layout()},insertRows:function(C,E,B,A){if(E==0&&B==C.getCount()-1)this.refresh();else{if(!A)this.fireEvent("beforerowsinserted",this,E,B);var D=this.getScrollState(),F=this.renderRows(E,B);this.bufferRows(F[0],this.getLockedTable(),E);this.bufferRows(F[1],this.getBodyTable(),E);this.restoreScroll(D);if(!A){this.fireEvent("rowsinserted",this,E,B);this.syncRowHeights(E,B);this.stripeRows(E);this.layout()}}},bufferRows:function(J,F,B){var E=null,H=F.rows,I=F.tBodies[0];if(B<H.length)E=H[B];var G=document.createElement("div");G.innerHTML="<table><tbody>"+J+"</tbody></table>";var D=G.firstChild.rows;for(var C=0,A=D.length;C<A;C++)if(E)I.insertBefore(D[0],E);else I.appendChild(D[0]);G.innerHTML="";G=null},deleteRows:function(D,F,C){if(D.getRowCount()<1){this.fireEvent("beforerefresh",this);this.mainBody.update("");this.lockedBody.update("");this.fireEvent("refresh",this)}else{this.fireEvent("beforerowsdeleted",this,F,C);var B=this.getBodyTable(),G=B.firstChild,A=B.rows;for(var E=F;E<=C;E++)G.removeChild(A[F]);this.stripeRows(F);this.fireEvent("rowsdeleted",this,F,C)}},updateRows:function(A,D,B){var C=this.getScrollState();this.refresh();this.restoreScroll(C)},handleSort:function(C,B,D,A){if(!A)this.refresh();this.updateHeaderSortState()},getScrollState:function(){var A=this.scroller.dom;return{left:A.scrollLeft,top:A.scrollTop}},stripeRows:function(H){if(!this.grid.stripeRows||this.ds.getCount()<1)return;H=H||0;var F=this.getBodyTable().rows,I=this.getLockedTable().rows,G=" x-grid-row-alt ";for(var C=H,B=F.length;C<B;C++){var E=F[C],J=I[C],D=((C+1)%2==0),A=(" "+E.className+" ").indexOf(G)!=-1;if(D==A)continue;if(D)E.className+=" x-grid-row-alt";else E.className=E.className.replace("x-grid-row-alt","");if(J)J.className=E.className}},restoreScroll:function(A){var B=this.scroller.dom;B.scrollLeft=A.left;B.scrollTop=A.top;this.syncScroll()},syncScroll:function(){var D=this.scroller.dom,A=this.mainHd.dom,C=this.mainBody.dom,B=this.lockedBody.dom;A.scrollLeft=C.scrollLeft=D.scrollLeft;B.scrollTop=C.scrollTop=D.scrollTop},handleScroll:function(B){this.syncScroll();var A=this.scroller.dom;this.grid.fireEvent("bodyscroll",A.scrollLeft,A.scrollTop);B.stopEvent()},handleWheel:function(B){var A=B.getWheelDelta();this.scroller.dom.scrollTop-=A*22;this.lockedBody.dom.scrollTop=this.mainBody.dom.scrollTop=this.scroller.dom.scrollTop;B.stopEvent()},renderRows:function(H,D){var I=this.grid,G=I.colModel,B=I.dataSource,F=I.stripeRows,C=G.getColumnCount();if(B.getCount()<1)return["",""];var E=[];for(var A=0;A<C;A++){var K=G.getDataIndex(A);E[A]={name:typeof K=="undefined"?B.fields.get(A).name:K,renderer:G.getRenderer(A),id:G.getColumnId(A),locked:G.isLocked(A)}}H=H||0;D=typeof D=="undefined"?B.getCount()-1:D;var J=B.getRange(H,D);return this.doRender(E,J,B,H,C,F)},doRender:Ext.isGecko?function(Q,T,L,F,N,S){var P=this.templates,U=P.cell,O=P.row,M="",B="",V,I,D,E={},H={},C;for(var R=0,A=T.length;R<A;R++){C=T[R],V="",I="",rowIndex=(R+F);for(var K=0;K<N;K++){D=Q[K];E.cellId="x-grid-cell-"+rowIndex+"-"+K;E.id=D.id;E.css=E.attr="";E.value=D.renderer(C.data[D.name],E,C,rowIndex,K,L);if(E.value==undefined||E.value==="")E.value="&#160;";if(C.dirty&&typeof C.modified[D.name]!=="undefined")E.css+=E.css?" x-grid-dirty-cell":"x-grid-dirty-cell";var J=U.apply(E);if(!D.locked)V+=J;else I+=J}var G=[];if(S&&((rowIndex+1)%2==0))G[0]="x-grid-row-alt";if(C.dirty)G[1]=" x-grid-dirty-row";H.cells=I;if(this.getRowClass)G[2]=this.getRowClass(C,rowIndex);H.alt=G.join(" ");B+=O.apply(H);H.cells=V;M+=O.apply(H)}return[B,M]}:function(Q,T,L,F,N,S){var P=this.templates,U=P.cell,O=P.row,M=[],B=[],V,I,D,E={},H={},C;for(var R=0,A=T.length;R<A;R++){C=T[R],V=[],I=[],rowIndex=(R+F);for(var K=0;K<N;K++){D=Q[K];E.cellId="x-grid-cell-"+rowIndex+"-"+K;E.id=D.id;E.css=E.attr="";E.value=D.renderer(C.data[D.name],E,C,rowIndex,K,L);if(E.value==undefined||E.value==="")E.value="&#160;";if(C.dirty&&typeof C.modified[D.name]!=="undefined")E.css+=E.css?" x-grid-dirty-cell":"x-grid-dirty-cell";var J=U.apply(E);if(!D.locked)V[V.length]=J;else I[I.length]=J}var G=[];if(S&&((rowIndex+1)%2==0))G[0]="x-grid-row-alt";if(C.dirty)G[1]=" x-grid-dirty-row";H.cells=I;if(this.getRowClass)G[2]=this.getRowClass(C,rowIndex);H.alt=G.join(" ");H.cells=I.join("");B[B.length]=O.apply(H);H.cells=V.join("");M[M.length]=O.apply(H)}return[B.join(""),M.join("")]},renderBody:function(){var B=this.renderRows(),A=this.templates.body;return[A.apply({rows:B[0]}),A.apply({rows:B[1]})]},refresh:function(B){this.fireEvent("beforerefresh",this);this.grid.stopEditing();var A=this.renderBody();this.lockedBody.update(A[0]);this.mainBody.update(A[1]);if(B===true){this.updateHeaders();this.updateColumns();this.updateSplitters();this.updateHeaderSortState()}this.syncRowHeights();this.layout();this.fireEvent("refresh",this)},handleColumnMove:function(C,A,B){this.indexMap=null;var D=this.getScrollState();this.refresh(true);this.restoreScroll(D);this.afterMove(B)},afterMove:function(A){if(this.enableMoveAnim&&Ext.enableFx)this.fly(this.getHeaderCell(A).firstChild).highlight(this.hlColor)},updateCell:function(F,J,H){var C=this.getColumnIndexByDataIndex(H);if(typeof C=="undefined")return;var I=this.grid.colModel,D=this.getCell(J,C),E=this.getCellText(J,C),G={cellId:"x-grid-cell-"+J+"-"+C,id:I.getColumnId(C),css:C==I.getColumnCount()-1?"x-grid-col-last":""},B=I.getRenderer(C),A=B(F.getValueAt(J,H),G,J,C,F);if(typeof A=="undefined"||A==="")A="&#160;";E.innerHTML=A;D.className=this.cellClass+" "+G.cellId+" "+G.css;this.syncRowHeights(J,J)},calcColumnWidth:function(G,F){var C=0;if(this.grid.autoSizeHeaders){var H=this.getHeaderCellMeasure(G);C=Math.max(C,H.scrollWidth)}var E,A;if(this.cm.isLocked(G)){E=this.getLockedTable();A=G}else{E=this.getBodyTable();A=G-this.cm.getLockedCount()}if(E&&E.rows){var D=E.rows,J=Math.min(F||D.length,D.length);for(var B=0;B<J;B++){var I=D[B].childNodes[A].firstChild;C=Math.max(C,I.scrollWidth)}}return C+5},autoSizeColumn:function(A,C,E){if(this.cm.isHidden(A))return;if(C){var D=this.cm.getColumnId(A);this.css.updateRule(this.colSelector+D,"width",this.grid.minColumnWidth+"px");if(this.grid.autoSizeHeaders)this.css.updateRule(this.hdSelector+D,"width",this.grid.minColumnWidth+"px")}var B=this.calcColumnWidth(A);this.cm.setColumnWidth(A,Math.max(this.grid.minColumnWidth,B),E);if(!E)this.grid.fireEvent("columnresize",A,B)},autoSizeColumns:function(){var C=this.grid.colModel,B=C.getColumnCount();for(var A=0;A<B;A++)this.autoSizeColumn(A,true,true);if(C.getTotalWidth()<this.scroller.dom.clientWidth)this.fitColumns();else{this.updateColumns();this.layout()}},fitColumns:function(H){var I=this.grid.colModel,F=I.getColumnCount(),B=[],C=0,A,E;for(A=0;A<F;A++)if(!I.isHidden(A)&&!I.isFixed(A)){E=I.getColumnWidth(A);B.push(A);B.push(E);C+=E}var G=Math.min(this.scroller.dom.clientWidth,this.el.getWidth());if(H)G-=17;var D=(G-I.getTotalWidth())/C;while(B.length){E=B.pop();A=B.pop();I.setColumnWidth(A,Math.floor(E+E*D),true)}this.updateColumns();this.layout()},onRowSelect:function(B){var A=this.getRowComposite(B);A.addClass("x-grid-row-selected")},onRowDeselect:function(B){var A=this.getRowComposite(B);A.removeClass("x-grid-row-selected")},onCellSelect:function(A,C){var B=this.getCell(A,C);if(B)Ext.fly(B).addClass("x-grid-cell-selected")},onCellDeselect:function(A,C){var B=this.getCell(A,C);if(B)Ext.fly(B).removeClass("x-grid-cell-selected")},updateHeaderSortState:function(){var D=this.ds.getSortState();if(!D)return;this.sortState=D;var C=this.cm.findColumnIndex(D.field);if(C!=-1){var E=D.direction,B=this.sortClasses,A=this.el.select(this.headerSelector).removeClass(B);A.item(C).addClass(B[E=="DESC"?1:0])}},handleHeaderClick:function(D,A){if(this.headersDisabled)return;var B=D.dataSource,C=D.colModel;if(!C.isSortable(A))return;D.stopEditing();B.sort(C.getDataIndex(A))},destroy:function(){if(this.colMenu){this.colMenu.removeAll();Ext.menu.MenuMgr.unregister(this.colMenu);this.colMenu.getEl().remove();delete this.colMenu}if(this.hmenu){this.hmenu.removeAll();Ext.menu.MenuMgr.unregister(this.hmenu);this.hmenu.getEl().remove();delete this.hmenu}if(this.grid.enableColumnMove){var C=Ext.dd.DDM.ids["gridHeader"+this.grid.container.id];if(C){for(var A in C){if(!C[A].config.isTarget&&C[A].dragElId){var B=C[A].dragElId;C[A].unreg();Ext.get(B).remove()}else if(C[A].config.isTarget){C[A].proxyTop.remove();C[A].proxyBottom.remove();C[A].unreg()}if(Ext.dd.DDM.locationCache[A])delete Ext.dd.DDM.locationCache[A]}delete Ext.dd.DDM.ids["gridHeader"+this.grid.container.id]}}this.bind(null,null);Ext.EventManager.removeResizeListener(this.onWindowResize,this)},handleLockChange:function(){this.refresh(true)},onDenyColumnLock:function(){},onDenyColumnHide:function(){},handleHdMenuClick:function(B){var A=this.hdCtxIndex,E=this.cm,C=this.ds;switch(B.id){case"asc":C.sort(E.getDataIndex(A),"ASC");break;case"desc":C.sort(E.getDataIndex(A),"DESC");break;case"lock":var D=E.getLockedCount();if(E.getColumnCount(true)<=D+1){this.onDenyColumnLock();return}if(D!=A){E.setLocked(A,true,true);E.moveColumn(A,D);this.grid.fireEvent("columnmove",A,D)}else E.setLocked(A,true);break;case"unlock":D=E.getLockedCount();if((D-1)!=A){E.setLocked(A,false,true);E.moveColumn(A,D-1);this.grid.fireEvent("columnmove",A,D-1)}else E.setLocked(A,false);break;default:A=E.getIndexById(B.id.substr(4));if(A!=-1){if(B.checked&&E.getColumnCount(true)<=1){this.onDenyColumnHide();return false}E.setHidden(A,B.checked)}}return true},beforeColMenuShow:function(){var C=this.cm,B=C.getColumnCount();this.colMenu.removeAll();for(var A=0;A<B;A++)this.colMenu.add(new Ext.menu.CheckItem({id:"col-"+C.getColumnId(A),text:C.getColumnHeader(A),checked:!C.isHidden(A),hideOnClick:false}))},handleHdCtx:function(E,A,F){F.stopEvent();var C=this.getHeaderCell(A);this.hdCtxIndex=A;var B=this.hmenu.items,D=this.cm;B.get("asc").setDisabled(!D.isSortable(A));B.get("desc").setDisabled(!D.isSortable(A));if(this.grid.enableColLock!==false){B.get("lock").setDisabled(D.isLocked(A));B.get("unlock").setDisabled(!D.isLocked(A))}this.hmenu.show(C,"tl-bl")},handleHdOver:function(B){var A=this.findHeaderCell(B.getTarget());if(A&&!this.headersDisabled)if(this.grid.colModel.isSortable(this.getCellIndex(A)))this.fly(A).addClass("x-grid-hd-over")},handleHdOut:function(B){var A=this.findHeaderCell(B.getTarget());if(A)this.fly(A).removeClass("x-grid-hd-over")},handleSplitDblClick:function(C,B){var A=this.getCellIndex(B);if(this.grid.enableColumnResize!==false&&this.cm.isResizable(A)&&!this.cm.isFixed(A)){this.autoSizeColumn(A,true);this.layout()}},render:function(){var E=this.cm,B=E.getColumnCount();if(this.grid.monitorWindowResize===true)Ext.EventManager.onWindowResize(this.onWindowResize,this,true);var D=this.renderHeaders(),F=this.templates.body.apply({rows:""}),C=this.templates.master.apply({lockedBody:F,body:F,lockedHeader:D[0],header:D[1]});this.updateColumns();this.grid.container.dom.innerHTML=C;this.initElements();this.scroller.on("scroll",this.handleScroll,this);this.lockedBody.on("mousewheel",this.handleWheel,this);this.mainBody.on("mousewheel",this.handleWheel,this);this.mainHd.on("mouseover",this.handleHdOver,this);this.mainHd.on("mouseout",this.handleHdOut,this);this.mainHd.on("dblclick",this.handleSplitDblClick,this,{delegate:"."+this.splitClass});this.lockedHd.on("mouseover",this.handleHdOver,this);this.lockedHd.on("mouseout",this.handleHdOut,this);this.lockedHd.on("dblclick",this.handleSplitDblClick,this,{delegate:"."+this.splitClass});if(this.grid.enableColumnResize!==false&&Ext.grid.SplitDragZone)new Ext.grid.SplitDragZone(this.grid,this.lockedHd.dom,this.mainHd.dom);this.updateSplitters();if(this.grid.enableColumnMove&&Ext.grid.HeaderDragZone){new Ext.grid.HeaderDragZone(this.grid,this.lockedHd.dom,this.mainHd.dom);new Ext.grid.HeaderDropZone(this.grid,this.lockedHd.dom,this.mainHd.dom)}if(this.grid.enableCtxMenu!==false&&Ext.menu.Menu){this.hmenu=new Ext.menu.Menu({id:this.grid.id+"-hctx"});this.hmenu.add({id:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{id:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});if(this.grid.enableColLock!==false)this.hmenu.add("-",{id:"lock",text:this.lockText,cls:"xg-hmenu-lock"},{id:"unlock",text:this.unlockText,cls:"xg-hmenu-unlock"});if(this.grid.enableColumnHide!==false){this.colMenu=new Ext.menu.Menu({id:this.grid.id+"-hcols-menu"});this.colMenu.on("beforeshow",this.beforeColMenuShow,this);this.colMenu.on("itemclick",this.handleHdMenuClick,this);this.hmenu.add("-",{id:"columns",text:this.columnsText,menu:this.colMenu})}this.hmenu.on("itemclick",this.handleHdMenuClick,this);this.grid.on("headercontextmenu",this.handleHdCtx,this)}if((this.grid.enableDragDrop||this.grid.enableDrag)&&Ext.grid.GridDragZone)this.dd=new Ext.grid.GridDragZone(this.grid,{ddGroup:this.grid.ddGroup||"GridDD"});for(var A=0;A<B;A++){if(E.isHidden(A))this.hideColumn(A);if(E.config[A].align){this.css.updateRule(this.colSelector+A,"textAlign",E.config[A].align);this.css.updateRule(this.hdSelector+A,"textAlign",E.config[A].align)}}this.updateHeaderSortState();this.beforeInitialResize();this.layout(true);this.renderPhase2.defer(1,this)},renderPhase2:function(){this.refresh();if(this.grid.autoSizeColumns)this.autoSizeColumns()},beforeInitialResize:function(){},onColumnSplitterMoved:function(A,B){this.userResized=true;var C=this.grid.colModel;C.setColumnWidth(A,B,true);var D=C.getColumnId(A);this.css.updateRule(this.colSelector+D,"width",(B-this.borderWidth)+"px");this.css.updateRule(this.hdSelector+D,"width",(B-this.borderWidth)+"px");this.updateSplitters();this.layout();this.grid.fireEvent("columnresize",A,B)},syncRowHeights:function(I,H){if(this.grid.enableRowHeightSync===true&&this.cm.getLockedCount()>0){I=I||0;var E=this.getBodyTable().rows,G=this.getLockedTable().rows,A=E.length-1;H=Math.min(H||A,A);for(var B=I;B<=H;B++){var C=E[B],F=G[B],D=Math.max(C.offsetHeight,F.offsetHeight);C.style.height=F.style.height=D+"px"}}},layout:function(O,G){var S=this.grid,M=S.autoHeight,F=16,C=S.container,Q=this.cm,R=S.autoExpandColumn,J=this;if(!C.dom.offsetWidth){if(O){this.lockedWrap.show();this.mainWrap.show()}return}var B=this.cm.isLocked(0),L=this.headerPanel.getHeight(),K=this.footerPanel.getHeight();if(M){var I=this.getBodyTable().offsetHeight+L+K+this.mainHd.getHeight(),D=I+C.getBorderWidth("tb");if(S.maxHeight)D=Math.min(S.maxHeight,D);C.setHeight(D)}if(S.autoWidth)C.setWidth(Q.getTotalWidth()+C.getBorderWidth("lr"));var N=this.scroller,X=C.getSize(true);this.el.setSize(X.width,X.height);this.headerPanel.setWidth(X.width);this.footerPanel.setWidth(X.width);var A=this.mainHd.getHeight(),Y=X.width,b=X.height-(L+K);N.setSize(Y,b);var W=this.getBodyTable(),P=B?Math.max(this.getLockedTable().offsetWidth,this.lockedHd.dom.firstChild.offsetWidth):0,T=W.offsetHeight,U=P+W.offsetWidth,E=false,H=false;this.scrollSizer.setSize(U,T+A);var V=this.lockedWrap,a=this.mainWrap,Z=this.lockedBody,c=this.mainBody;setTimeout(function(){var I=N.dom.offsetTop,C=N.dom.clientWidth,E=N.dom.clientHeight;V.setTop(I);V.setSize(P,E);a.setLeftTop(P,I);a.setSize(C-P,E);Z.setHeight(E-A);c.setHeight(E-A);if(G!==true&&!J.userResized&&R){var H=Q.getIndexById(R),F=Q.getTotalWidth(false),B=Q.getColumnWidth(H),D=Math.min(Math.max(((C-F)+B-2)-(C<=N.dom.offsetWidth?0:18),S.autoExpandMin),S.autoExpandMax);if(B!=D){Q.setColumnWidth(H,D,true);J.css.updateRule(J.colSelector+R,"width",(D-J.borderWidth)+"px");J.css.updateRule(J.hdSelector+R,"width",(D-J.borderWidth)+"px");J.updateSplitters();J.layout(false,true)}}if(O){V.show();a.show()}},10)},onWindowResize:function(){if(!this.grid.monitorWindowResize||this.grid.autoHeight)return;this.layout()},appendFooter:function(A){return null},sortAscText:"\u5347\u5e8f",sortDescText:"\u964d\u5e8f",lockText:"\u51bb\u7ed3\u5217",unlockText:"\u53d6\u6d88\u51bb\u7ed3",columnsText:"\u5217"})

//Ext.grid.RowSelectionModel=function(A){Ext.apply(this,A);this.selections=new Ext.util.MixedCollection(false,function(A){return A.id});this.last=false;this.lastActive=false;this.addEvents({"selectionchange":true,"beforerowselect":true,"rowselect":true,"rowdeselect":true});this.locked=false};Ext.extend(Ext.grid.RowSelectionModel,Ext.grid.AbstractSelectionModel,{singleSelect:false,initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag)this.grid.on("mousedown",this.handleMouseDown,this);this.rowNav=new Ext.KeyNav(this.grid.container,{"up":function(B){if(!B.shiftKey)this.selectPrevious(B.shiftKey);else if(this.last!==false&&this.lastActive!==false){var A=this.last;this.selectRange(this.last,this.lastActive-1);this.grid.getView().focusRow(this.lastActive);if(A!==false)this.last=A}else this.selectFirstRow()},"down":function(B){if(!B.shiftKey)this.selectNext(B.shiftKey);else if(this.last!==false&&this.lastActive!==false){var A=this.last;this.selectRange(this.last,this.lastActive+1);this.grid.getView().focusRow(this.lastActive);if(A!==false)this.last=A}else this.selectFirstRow()},scope:this});var A=this.grid.view;A.on("refresh",this.onRefresh,this);A.on("rowupdated",this.onRowUpdated,this);A.on("rowremoved",this.onRemove,this)},onRefresh:function(){var B=this.grid.dataSource,A,D=this.grid.view,C=this.selections;C.each(function(E){if((A=B.indexOfId(E.id))!=-1)D.onRowSelect(A);else C.remove(E)})},onRemove:function(C,B,A){this.selections.remove(A)},onRowUpdated:function(C,B,A){if(this.isSelected(A))C.onRowSelect(B)},selectRecords:function(D,E){if(!E)this.clearSelections();var C=this.grid.dataSource;for(var B=0,A=D.length;B<A;B++)this.selectRow(C.indexOf(D[B]),true)},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(A){this.selectRow(this.grid.dataSource.getCount()-1,A)},selectNext:function(A){if(this.last!==false&&(this.last+1)<this.grid.dataSource.getCount()){this.selectRow(this.last+1,A);this.grid.getView().focusRow(this.last)}},selectPrevious:function(A){if(this.last){this.selectRow(this.last-1,A);this.grid.getView().focusRow(this.last)}},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},clearSelections:function(B){if(this.locked)return;if(B!==true){var A=this.grid.dataSource,C=this.selections;C.each(function(B){this.deselectRow(A.indexOfId(B.id))},this);C.clear()}else this.selections.clear();this.last=false},selectAll:function(){if(this.locked)return;this.selections.clear();for(var B=0,A=this.grid.dataSource.getCount();B<A;B++)this.selectRow(B,true)},hasSelection:function(){return this.selections.length>0},isSelected:function(B){var A=typeof B=="number"?this.grid.dataSource.getAt(B):B;return(A&&this.selections.key(A.id)?true:false)},isIdSelected:function(A){return(this.selections.key(A)?true:false)},handleMouseDown:function(D,B){var A=this.grid.getView(),C;if(this.isLocked()||(C=A.findRowIndex(B))===false)return;this.selectRow(C);A.focusRow(C)},selectRows:function(C,D){if(!D)this.clearSelections();for(var B=0,A=C.length;B<A;B++)this.selectRow(C[B],true)},selectRange:function(D,C,B){if(this.locked)return;if(!B)this.clearSelections();if(D<=C){for(var A=D;A<=C;A++)this.selectRow(A,true)}else for(A=D;A>=C;A--)this.selectRow(A,true)},deselectRange:function(A,C,D){if(this.locked)return;for(var B=A;B<=C;B++)this.deselectRow(B,D)},selectRow:function(A,D,C){if(this.locked||(A<0||A>=this.grid.dataSource.getCount()))return;if(this.fireEvent("beforerowselect",this,A,D)!==false){if(!D||this.singleSelect)this.clearSelections();var B=this.grid.dataSource.getAt(A);this.selections.add(B);this.last=this.lastActive=A;if(!C)this.grid.getView().onRowSelect(A);this.fireEvent("rowselect",this,A,B);this.fireEvent("selectionchange",this)}},deselectRow:function(A,B){if(this.locked)return;if(this.last==A)this.last=false;if(this.lastActive==A)this.lastActive=false;var C=this.grid.dataSource.getAt(A);this.selections.remove(C);if(!B)this.grid.getView().onRowDeselect(A);this.fireEvent("rowdeselect",this,A);this.fireEvent("selectionchange",this)},restoreLast:function(){if(this._last)this.last=this._last},acceptsNav:function(A,C,B){return!B.isHidden(C)&&B.isCellEditable(C,A)},onEditorKey:function(E,F){var A=F.getKey(),C,D=this.grid,B=D.activeEditor;if(A==F.TAB){B.completeEdit();if(F.shiftKey)C=D.walkCells(B.row,B.col-1,-1,this.acceptsNav,this);else C=D.walkCells(B.row,B.col+1,1,this.acceptsNav,this);F.stopEvent()}else if(A==F.ENTER&&!F.ctrlKey){B.completeEdit();if(F.shiftKey)C=D.walkCells(B.row-1,B.col,-1,this.acceptsNav,this);else C=D.walkCells(B.row+1,B.col,1,this.acceptsNav,this);F.stopEvent()}else if(A==F.ESC)B.cancelEdit();if(C)D.startEditing(C[0],C[1])}})

//Ext.grid.EditorGrid=function(B,A){Ext.grid.EditorGrid.superclass.constructor.call(this,B,A);this.container.addClass("xedit-grid");if(!this.selModel)this.selModel=new Ext.grid.CellSelectionModel();this.activeEditor=null;this.addEvents({"beforeedit":true,"afteredit":true,"validateedit":true});this.on("bodyscroll",this.stopEditing,this);this.on(this.clicksToEdit==1?"cellclick":"celldblclick",this.onCellDblClick,this)};Ext.extend(Ext.grid.EditorGrid,Ext.grid.Grid,{isEditor:true,clicksToEdit:2,trackMouseOver:false,onCellDblClick:function(C,A,B){this.startEditing(A,B)},onEditComplete:function(D,A,E){this.editing=false;this.activeEditor=null;D.un("specialkey",this.selModel.onEditorKey,this.selModel);if(String(A)!=String(E)){var B=D.record,C=this.colModel.getDataIndex(D.col),F={grid:this,record:B,field:C,originalValue:E,value:A,row:D.row,column:D.col,cancel:false};if(this.fireEvent("validateedit",F)!==false&&!F.cancel){B.set(C,F.value);delete F.cancel;this.fireEvent("afteredit",F)}}this.view.focusCell(D.row,D.col)},startEditing:function(A,D){this.stopEditing();if(this.colModel.isCellEditable(D,A)){this.view.focusCell(A,D);var B=this.dataSource.getAt(A),C=this.colModel.getDataIndex(D),E={grid:this,record:B,field:C,value:B.data[C],row:A,column:D,cancel:false};if(this.fireEvent("beforeedit",E)!==false&&!E.cancel){this.editing=true;(function(){var E=this.colModel.getCellEditor(D,A);E.row=A;E.col=D;E.record=B;E.on("complete",this.onEditComplete,this,{single:true});E.on("specialkey",this.selModel.onEditorKey,this.selModel);this.activeEditor=E;var F=B.data[C];E.startEdit(this.view.getCell(A,D),F)}).defer(50,this)}}},stopEditing:function(){if(this.activeEditor)this.activeEditor.completeEdit();this.activeEditor=null}});Ext.grid.GridEditor=function(B,A){Ext.grid.GridEditor.superclass.constructor.call(this,B,A);B.monitorTab=false};Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:false,shim:false,shadow:"frame"})

Ext.MessageBox=function(){var G,J,N,D,A,H,K,L,I,E,P,Q,B,O=function(A){G.hide();Ext.callback(J.fn,J.scope||window,[A,Q.dom.value],1)},C=function(){if(J&&J.cls)G.el.removeClass(J.cls);if(D){Ext.TaskMgr.stop(D);D=null}},M=function(C){var B=0;if(!C){P["ok"].hide();P["cancel"].hide();P["yes"].hide();P["no"].hide();G.footer.dom.style.display="none";return B}G.footer.dom.style.display="";for(var A in P)if(typeof P[A]!="function")if(C[A]){P[A].show();P[A].setText(typeof C[A]=="string"?C[A]:Ext.MessageBox.buttonText[A]);B+=P[A].el.getWidth()+15}else P[A].hide();return B},F=function(A,B,C){if(J&&J.closable!==false)G.hide();if(C)C.stopEvent()};return{getDialog:function(){if(!G){G=new Ext.BasicDialog("x-msg-box",{autoCreate:true,shadow:true,draggable:true,resizable:false,constraintoviewport:false,fixedcenter:true,collapsible:false,shim:true,modal:true,width:400,height:100,buttonAlign:"center",closeClick:function(){if(J&&J.buttons&&J.buttons.no&&!J.buttons.cancel)O("no");else O("cancel")}});G.on("hide",C);N=G.mask;G.addKeyListener(27,F);P={};var B=this.buttonText;P["ok"]=G.addButton(B["ok"],O.createCallback("ok"));P["yes"]=G.addButton(B["yes"],O.createCallback("yes"));P["no"]=G.addButton(B["no"],O.createCallback("no"));P["cancel"]=G.addButton(B["cancel"],O.createCallback("cancel"));A=G.body.createChild({tag:"div",html:"<span class=\"ext-mb-text\"></span><br /><input type=\"text\" class=\"ext-mb-input\" /><textarea class=\"ext-mb-textarea\"></textarea><div class=\"ext-mb-progress-wrap\"><div class=\"ext-mb-progress\"><div class=\"ext-mb-progress-bar\">&#160;</div></div></div>"});H=A.dom.firstChild;K=Ext.get(A.dom.childNodes[2]);K.enableDisplayMode();K.addKeyListener([10,13],function(){if(G.isVisible()&&J&&J.buttons)if(J.buttons.ok)O("ok");else if(J.buttons.yes)O("yes")});L=Ext.get(A.dom.childNodes[3]);L.enableDisplayMode();I=Ext.get(A.dom.childNodes[4]);I.enableDisplayMode();var D=I.dom.firstChild;E=Ext.get(D.firstChild);E.setHeight(D.offsetHeight)}return G},updateText:function(D){if(!G.isVisible()&&!J.width)G.resizeTo(this.maxWidth,100);var F=D,E=J.img;if(E!=null){F="<div class=\""+E+"\"></div>";F+="<table border=\"0\" height=\"100%\">";F+="\t<tr>";F+="\t\t<td width=\"12%\"></td>";F+="\t\t<td width=\"87%\" valign=\"middle\">"+D+"</td>";F+="\t</tr>";F+="</table>"}H.innerHTML=F;var C=Math.max(Math.min(J.width||H.offsetWidth,this.maxWidth),Math.max(J.minWidth||this.minWidth,B));if(J.prompt)Q.setWidth(C);if(G.isVisible())G.fixedcenter=false;G.setContentSize(C,A.getHeight());if(G.isVisible())G.fixedcenter=true;return this},updateProgress:function(A,B){if(B)this.updateText(B);E.setWidth(Math.floor(A*I.dom.firstChild.offsetWidth));return this},isVisible:function(){return G&&G.isVisible()},hide:function(){if(this.isVisible())G.hide()},show:function(D){if(this.isVisible())this.hide();var A=this.getDialog();J=D;A.setTitle(J.title||"&#160;");A.close.setDisplayed(J.closable!==false);Q=K;J.prompt=J.prompt||(J.multiline?true:false);if(J.prompt){if(J.multiline){K.hide();L.show();L.setHeight(typeof J.multiline=="number"?J.multiline:this.defaultTextHeight);Q=L}else{K.show();L.hide()}}else{K.hide();L.hide()}I.setDisplayed(J.progress===true);this.updateProgress(0);Q.dom.value=J.value||"";if(J.prompt)G.setDefaultButton(Q);else{var E=J.buttons,C=null;if(E&&E.ok)C=P["ok"];else if(E&&E.yes)C=P["yes"];G.setDefaultButton(C)}B=M(J.buttons);this.updateText(J.msg);if(J.cls)A.el.addClass(J.cls);A.proxyDrag=J.proxyDrag===true;A.modal=J.modal!==false;A.mask=J.modal!==false?N:false;if(!A.isVisible()){document.body.appendChild(G.el.dom);A.animateTarget=null;A.show(D.animEl)}return this},progress:function(B,A){this.show({title:B,msg:A,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,img:null});return this},alert:function(C,B,D,A){this.show({title:C,msg:B,buttons:this.OK,fn:D,scope:A,img:"alert"});return this},wait:function(B,A){this.show({title:A,msg:B,buttons:false,closable:false,progress:true,modal:true,width:300,wait:true,img:null});D=Ext.TaskMgr.start({run:function(A){Ext.MessageBox.updateProgress(((((A+20)%20)+1)*5)*0.01)},interval:1000});return this},confirm:function(B,C,D,A){this.show({title:B,msg:C,buttons:this.YESNO,fn:D,scope:A,img:"confirm"});return this},prompt:function(A,B,E,C,D){this.show({title:A,msg:B,buttons:this.OKCANCEL,fn:E,minWidth:250,scope:C,prompt:true,multiline:D,img:null});return this},suggest:function(B,C,A){Ext.suggest.msg(B,C,A)},OK:{ok:true},YESNO:{yes:true,no:true},OKCANCEL:{ok:true,cancel:true},YESNOCANCEL:{yes:true,no:true,cancel:true},defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,buttonText:{ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88",yes:"\u662f",no:"\u5426"}}}();
Ext.Msg = Ext.MessageBox;
Msg = Ext.MessageBox;

var Cookies = {
};

Cookies.set = function(H, B) {
  var F = arguments, I = arguments.length, E = (I > 3) ? F[3] : "/", C = (I > 4) ? F[4] : null, A = (I > 5) ? F[5] : false, D = 60, G = new Date();
  G.setTime(G.getTime() + D * 24 * 60 * 60 * 1000);
  document.cookie = H + "=" + escape(B) + ((G == null) ? "" : ("; expires=" + G.toGMTString())) + ((E == null) ? "" : ("; path=" + E)) + ((C == null) ? "" : ("; domain=" + C)) + ((A == true) ? "; secure":"");
};

Cookies.get = function(D) {
  var B = D + "=", F = B.length, E = document.cookie.length, A = 0, C = 0;
  while(A < E) {
    C = A + F;
    if(document.cookie.substring(A, C) == B) {
      return Cookies.getCookieVal(C);
    }
    A = document.cookie.indexOf(" ", A) + 1;
    if(A == 0) {
      break;
    }
  }
  return null;
};

Cookies.clear = function(A) {
  if(Cookies.get(A)) {
    document.cookie = A + "=" + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
  }
};

Cookies.getCookieVal = function(B) {
  var A = document.cookie.indexOf(";", B);
  if(A == -1) {
    A = document.cookie.length;
  }
  return unescape(document.cookie.substring(B, A));
};

var xtheme = Cookies.get("xrinsurtheme");
if(!xtheme) {
  xtheme = "aero";
  Cookies.set("xrinsurtheme", xtheme);
}
var xthemePath = document.location.pathname;

if(xthemePath.indexOf(".html") >= 0 && xthemePath.indexOf("index.htm") < 0 && xthemePath.indexOf("welcome.htm") < 0) {
  document.write("<link id=\"theme\" rel=\"stylesheet\" type=\"text/css\" href=\"../widgets/extjs/1.1/resources/css/ytheme-" + xtheme + ".css\" />");
  document.write("<link id=\"theme-iframeLayout\" rel=\"stylesheet\" type=\"text/css\" href=\"../widgets/extjs/1.1/resources/css/ylayout.css\" />");
} else {
  document.write("<link id=\"theme\" rel=\"stylesheet\" type=\"text/css\" href=\"../widgets/extjs/1.1/resources/css/ytheme-" + xtheme + ".css\" />");
}


Ext.LoadMask.prototype = {
    msg:"正在载入数据，请稍候...",
    msgCls:"x-mask-loading",
    disabled:false,
    disable:function() {
        this.disabled = true;
    }, enable:function() {
        this.disabled = false;
    }, onLoad:function() {
        this.el.unmask(this.removeMask);
    }, onBeforeLoad:function() {
        if(!this.disabled) {
            this.el.mask(this.msg, this.msgCls);
        }
    }, destroy:function() {
        if(this.store) {
            this.store.un("beforeload", this.onBeforeLoad, this);
            this.store.un("load", this.onLoad, this);
            this.store.un("loadexception", this.onLoad, this);
        } else {
            var um = this.el.getUpdateManager();
            um.un("beforeupdate", this.onBeforeLoad, this);
            um.un("update", this.onLoad, this);
            um.un("failure", this.onLoad, this);
        }
    }
};


Ext.suggest = function() {
    var B;
    function A(A, B) {
        return["<div class=\"msg\">", "<div class=\"x-box-tl\"><div class=\"x-box-tr\"><div class=\"x-box-tc\"></div></div></div>","<div class=\"x-box-ml\"><div class=\"x-box-mr\"><div class=\"x-box-mc\"><font color=red><h2>", A, "</h2></font>", B, "</div></div></div>", "<div class=\"x-box-bl\"><div class=\"x-box-br\"><div class=\"x-box-bc\"></div></div></div>", "</div>"].join("");
    }
    return{
        msg:function(E, G, C) {
            if(!B) {
                B = Ext.DomHelper.insertFirst(document.body, {id:"msg-div"}, true);
            }
            if(!C) {
                C=1;
            }
            var F = String.format.apply(String,Array.prototype.slice.call(arguments,1)), D = Ext.DomHelper.append(B, {
                html:A(E, F)
            }, true);
            D.slideIn("t").pause(C).ghost("t", {
                remove:true
            });
        }
    }
}();


Ext.theme = function() {
    return{
        apply:function(A) {
            A = A.id ? A.id : A;
            Cookies.set("xrinsurtheme", A);
            Ext.util.CSS.swapStyleSheet("theme", getSitePath() + "/widgets/extjs/1.1/resources/css/ytheme-" + A + ".css");
            //var iframe = Ext.isGecko ? document.getElementById("main").contentWindow : parent.frames["main"];
            var iframe = document.getElementById("main").contentWindow;
            iframe.Ext.util.CSS.swapStyleSheet("theme", getSitePath() + "/widgets/extjs/1.1/resources/css/ytheme-" + A + ".css");
            iframe.Ext.util.CSS.swapStyleSheet("theme-iframeLayout", getSitePath() + "/widgets/extjs/1.1/resources/css/layout.css")
        }
    }
} ();
var path = getSitePath();


Date.prototype.format = function(C) {
    var A = {
        "M+":this.getMonth() + 1, "d+":this.getDate(), "h+":this.getHours(), "m+":this.getMinutes(), "s+":this.getSeconds(), "q+":Math.floor((this.getMonth()+3)/3), "S":this.getMilliseconds()
    };
    if(/(y+)/.test(C)) {
        C = C.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
    }
    for(var B in A) {
        if(new RegExp("("+B+")").test(C)) {
            C = C.replace(RegExp.$1, RegExp.$1.length == 1 ? A[B] : ("00" + A[B]).substr(("" + A[B]).length));
        }
    }
    return C
}


function getSitePath() {
    var B = document.location.protocol, C = document.location.host, D = document.location.pathname, A = document.location.search, E = B + "//" + C + "/" + (D.split("/"))[1];
    return E;
}
function setSitePath(A) {
    return path + "/" + A;
}
function Request(F) {
    var D = new String(window.location), A = D.lastIndexOf("?"), B = F.length, C = D.indexOf("?" + F + "=");
    if(C == -1) {
        C = D.indexOf("&" + F + "=");
        if(C == -1) {
            return 0;
        }
    }
    //C = C + + B + 2;
    C = C + B + 2;
    var E = D.indexOf("&", C);
    if(E == -1) {
        E = D.length;
    }
    return D.slice(C, E);
    D = null;
}


function setTableRows(G, E, H) {
    Ext.get(H + "-len").dom.value = G;
    for(var C = 0; C < E; C++) {
        var A = Ext.get(H + "-len-" + (C + 1)).dom;
        A.className = C == G - 1 ? "radioAreaChecked" : "radioArea";
        var F = Ext.get(H + "-lab-" + (C + 1)).dom;
        F.className = C == G - 1 ? "" : "chosen";
        var D = Ext.get(H + "-tr-" + C).dom;
        D.style.display = C < G ? "" : "none";
        if(C < E - 1) {
            var B = Ext.get(H + "-logic-item-" + C).dom;
            B.style.display = C < G - 1 ? "" : "none";
        }
    }
}
function getId(A, C, B, D) {
    if(B.className == "") {
        A.checked = true;
        B.className = "chosen";
        C.className = "checkboxAreaChecked";
    } else if(B.className == "chosen") {
        A.checked = false;
        B.className = "";
        C.className = "checkboxArea";
    }
    setId(A, D, A.value);
}
function setId(B, C, A) {
    if(B.checked) {
        C.value += (C.value == "") ? (A) : ("," + A);
    } else {
        C.value = C.value.replace("," + A, "");
        C.value = C.value.replace(A + ",", "");
        C.value = C.value.replace(A, "");
    }
}
function objectEval(text) {
    if (!text) {
        return null;
    } else if (typeof(text) == "number") {
        return text;
    }
    text = text.replace(/\n/g, " ");
    text = text.replace(/\r/g, " ");
    if(text.match(/^\s*\{.*\}\s*$/)) {
        text = "[" + text + "][0]";
        return eval(text);
    }
}
String.formatFloat = function(A, B) {
    var B = Math.pow(10, B), A = Math.round(A * B) / B;
    if((A + "").indexOf(".") < 0) {
        A += (B + "").replace("1", ".");
    }
    return A;
};
function IsNumber(A, C) {
    if(C == null) {
        return false;
    }
    var B = new Number(A);
    if(isNaN(B)) {
        return false;
    } else if((C == "-" && B < 0) || (C == "+" && B >= 0)) {
        return true;
    }
    return false;
}

